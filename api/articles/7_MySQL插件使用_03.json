{"title":"UE4 MySQL插件使用","uid":"392fe5e03b8c7afffa5955ae17305c17","slug":"7_MySQL插件使用_03","date":"2022-10-06T07:28:25.950Z","updated":"2022-05-19T04:29:51.469Z","comments":true,"path":"api/articles/7_MySQL插件使用_03.json","keywords":null,"cover":"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN/Post_Img_mini/postImg_25.jpg","content":"<h1 id=\"UE4-MySQL插件使用\"><a href=\"#UE4-MySQL插件使用\" class=\"headerlink\" title=\"UE4 MySQL插件使用\"></a>UE4 MySQL插件使用</h1><h3 id=\"1-插件获取\"><a href=\"#1-插件获取\" class=\"headerlink\" title=\"1. 插件获取\"></a>1. 插件获取</h3><p><a href=\"https://www.aliyundrive.com/s/UiPTz9mnNUV\">MySQL Plugin</a> 提取码:17um</p>\n<h3 id=\"2-插件安装\"><a href=\"#2-插件安装\" class=\"headerlink\" title=\"2. 插件安装\"></a>2. 插件安装</h3><ol>\n<li>新建<code>UE4</code>项目，类型随意</li>\n<li>在<code>项目根目录</code>中新建文件夹<code>Plugins</code></li>\n<li>将<code>FH_MySQL</code>复制到<code>Plugins</code>中</li>\n<li>重新打开<code>UE4项目</code></li>\n</ol>\n<h3 id=\"3-插件API\"><a href=\"#3-插件API\" class=\"headerlink\" title=\"3. 插件API\"></a>3. 插件API</h3><h4 id=\"3-1-连接数据库\"><a href=\"#3-1-连接数据库\" class=\"headerlink\" title=\"3.1 连接数据库\"></a>3.1 连接数据库</h4><ul>\n<li><p>返回一个<code>MySQL Connector</code></p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">&#x2F;*\n * Connection &#x3D;&#x3D; MySQL Object\n * @return *UFH_ConnectionObject &#x3D;&#x3D; MySQL Connector\n*&#x2F;\nUFUNCTION(BlueprintCallable, Category&#x3D;&quot;MySQL|Utils&quot;)\nstatic UFH_ConnectionObject *ConnectToMySQL(FString Host, FString UserName, FString PassWord, FString DBName,\n                                            int32 Port, FString &amp;ConnectMessage);</code></pre></li>\n</ul>\n<h4 id=\"3-2-获得连接状态\"><a href=\"#3-2-获得连接状态\" class=\"headerlink\" title=\"3.2 获得连接状态\"></a>3.2 获得连接状态</h4><ul>\n<li><p>返回<code>bool</code>，正在连接返回<code>true</code></p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">&#x2F;*\n * ConnectionObject &#x3D;&#x3D; MySQL Object\n * @return bool &#x3D;&#x3D; ConnectionState\n*&#x2F;\nUFUNCTION(BlueprintCallable, Category&#x3D;&quot;MySQL|Utils&quot;)\nstatic bool GetConnectionState(UFH_ConnectionObject *ConnectionObject);</code></pre></li>\n</ul>\n<h4 id=\"3-3-关闭数据库连接\"><a href=\"#3-3-关闭数据库连接\" class=\"headerlink\" title=\"3.3 关闭数据库连接\"></a>3.3 关闭数据库连接</h4><ul>\n<li><p>肯定会关掉，默认返回<code>true</code></p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">&#x2F;*\n * ConnectionObject &#x3D;&#x3D; MySQL Object\n * @return bool &#x3D;&#x3D; ConnectionState\n*&#x2F;\nUFUNCTION(BlueprintCallable, Category&#x3D;&quot;MySQL|Utils&quot;)\nstatic bool CloseConnection(UFH_ConnectionObject *ConnectionObject);</code></pre></li>\n</ul>\n<h4 id=\"3-4-增-删-改处理\"><a href=\"#3-4-增-删-改处理\" class=\"headerlink\" title=\"3.4 增-删-改处理\"></a>3.4 增-删-改处理</h4><ul>\n<li><p>实现增删改的处理，具体执行程序依据传入<code>格式化SqlQuery</code></p>\n</li>\n<li><p><code>Insert</code>，<code>Delete</code>，<code>Update</code></p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">&#x2F;*\n * ConnectionObject &#x3D;&#x3D; MySQL Object\n * @return bool &#x3D;&#x3D; Insert, Update, Delete Data Is Succeed Or Failed\n*&#x2F;\nUFUNCTION(BlueprintCallable, Category&#x3D;&quot;MySQL|Utils&quot;)\nstatic bool ActionOnTableData(UFH_ConnectionObject *ConnectionObject, FString SqlQuery);</code></pre></li>\n</ul>\n<h5 id=\"3-4-1-Insert-Format-SqlQuery\"><a href=\"#3-4-1-Insert-Format-SqlQuery\" class=\"headerlink\" title=\"3.4.1 Insert Format SqlQuery\"></a>3.4.1 Insert Format SqlQuery</h5><ul>\n<li><p>通用的 <code>INSERT INTO TableName VALUES(InsertValues);</code>格式化插入语句</p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">&#x2F;*\n * TableName &#x3D; DataBase TableName\n * InsertValues &#x3D; MySQL Insert Values to Table\n * @return FString &#x3D; MySQL Insert Query -&gt; Insert\n*&#x2F;\nUFUNCTION(BlueprintPure, Category&#x3D;&quot;MySQL|Utils&quot;)\nstatic FString InsertFormatSqlQuery(FString TableName, FString InsertValues);</code></pre></li>\n</ul>\n<h5 id=\"3-4-2-Update-Format-SqlQuery\"><a href=\"#3-4-2-Update-Format-SqlQuery\" class=\"headerlink\" title=\"3.4.2 Update Format SqlQuery\"></a>3.4.2 Update Format SqlQuery</h5><ul>\n<li><p>更新所有字段的值<code>UPDATE TableName SET RowName = UpdateValue;</code>格式化更新语句</p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">&#x2F;*\n * TableName &#x3D; DataBase TableName\n * RowName &#x3D; Need Update Row\n * @return FString &#x3D; MySQL Update Query -&gt; Update\n*&#x2F;\t\nUFUNCTION(BlueprintPure, Category&#x3D;&quot;MySQL|Utils&quot;)\nstatic FString UpdateAllFormatSqlQuery(FString TableName, FString RowName, FString UpdateValue);</code></pre>\n\n\n</li>\n<li><p>依据条件更新字段值<code>UPDATE TableName SET UpdateRowName = UpdateValue WHERE WhereName = WhereValue;</code>格式化更新语句</p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">&#x2F;*\n * TableName &#x3D; DataBase TableName\n * RowName &#x3D; Need Update Row\n * WhereName &#x3D; Update Where\n * WhereSymbol &#x3D; Operator Or Symbol\n * WhereValue &#x3D; Condition Name\n * UpdateValue &#x3D; Need Update Date Value\n * @return FString &#x3D; MySQL Update Query -&gt; Update\n*&#x2F;\t\nUFUNCTION(BlueprintPure, Category&#x3D;&quot;MySQL|Utils&quot;)\nstatic FString UpdateByWhereFormatSqlQuery(FString TableName, FString RowName, FString WhereName, \n                                           FString WhereSymbol, FString WhereValue, FString UpdateValue);</code></pre></li>\n</ul>\n<h5 id=\"3-4-3-Delete-Format-SqlQuery\"><a href=\"#3-4-3-Delete-Format-SqlQuery\" class=\"headerlink\" title=\"3.4.3 Delete Format SqlQuery\"></a>3.4.3 Delete Format SqlQuery</h5><ul>\n<li><p>删除整个表<code>DELETE FROM TableName;</code>格式化删除语句</p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">&#x2F;*\n * TableName &#x3D; DataBase TableName\n * @return FString &#x3D; MySQL Delete Query -&gt; Delete\n*&#x2F;\nUFUNCTION(BlueprintPure, Category&#x3D;&quot;MySQL|Utils&quot;)\nstatic FString DeleteAllFormatSqlQuery(FString TableName);</code></pre>\n\n\n</li>\n<li><p>依据条件删除整行数据<code>DELETE FROM TableName WHERE WhereName=‘WhereValue’;</code>格式化删除语句</p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">&#x2F;*\n * TableName &#x3D; DataBase TableName\n * WhereName &#x3D; Update Where\n * WhereSymbol &#x3D; Operator Or Symbol\n * WhereValue &#x3D; Condition Name\n * @return FString &#x3D; MySQL Delete Query -&gt; Delete\n*&#x2F;\nUFUNCTION(BlueprintPure, Category&#x3D;&quot;MySQL|Utils&quot;)\nstatic FString DeleteByWhereFormatSqlQuery(FString TableName, FString WhereName, FString WhereSymbol, \n                                           FString WhereValue);</code></pre></li>\n</ul>\n<h4 id=\"3-5-查询语句处理\"><a href=\"#3-5-查询语句处理\" class=\"headerlink\" title=\"3.5 查询语句处理\"></a>3.5 查询语句处理</h4><ul>\n<li><p>实现基本常用的查询语句：</p>\n<ol>\n<li><code>SELECT * FROM TableName;</code></li>\n<li><code>SELECT Columns1, Columns2, Country FROM TableName;</code></li>\n<li><code>获得指定行的整行数据</code></li>\n</ol>\n</li>\n<li><p>处理查询语句的通用，具体执行程序依据传入<code>格式化SqlQuery</code></p>\n</li>\n<li><p>函数公开生成并返回<code>struct</code>类型：</p>\n<ul>\n<li><code>ResultRows</code>整个表的数据</li>\n<li><code>ResultRow</code>整行的数据</li>\n<li><code>RowValue</code>整行内字段名的数据</li>\n</ul>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">&#x2F;*\n * ConnectionObject &#x3D;&#x3D; MySQL Object\n * @return bool &#x3D;&#x3D; Select Data Is Succeed Or Failed\n*&#x2F;\t\nUFUNCTION(BlueprintCallable, Category&#x3D;&quot;MySQL|Utils&quot;)\nstatic bool SelectOnTableData(UFH_ConnectionObject *ConnectionObject, FString SqlQuery, \n                              FQueryResultRows &amp;ResultRows);</code></pre></li>\n</ul>\n<h5 id=\"3-5-1-Select-All-Format-SqlQuery\"><a href=\"#3-5-1-Select-All-Format-SqlQuery\" class=\"headerlink\" title=\"3.5.1 Select All Format SqlQuery\"></a>3.5.1 Select All Format SqlQuery</h5><ul>\n<li><p>查询整个表的数据<code>SELECT * FROM TableName;</code>格式化查询语句</p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">&#x2F;*\n * TableName &#x3D; DataBase TableName\n * @return FString &#x3D; MySQL Select Query -&gt; Select\n*&#x2F;\nUFUNCTION(BlueprintPure, Category&#x3D;&quot;MySQL|Utils&quot;)\nstatic FString SelectAllFormatSqlQuery(FString TableName);</code></pre></li>\n</ul>\n<h5 id=\"3-5-2-Select-Columns-By-Conditions\"><a href=\"#3-5-2-Select-Columns-By-Conditions\" class=\"headerlink\" title=\"3.5.2 Select Columns By Conditions\"></a>3.5.2 Select Columns By Conditions</h5><ul>\n<li><p>依据条件查询表内数据<code>SELECT Columns1, Columns2, Country FROM TableName;</code>格式化查询语句</p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">&#x2F;*\n * TableName &#x3D; DataBase TableName\n * @return FString &#x3D; MySQL Select Query -&gt; Select\n*&#x2F;\t\nUFUNCTION(BlueprintPure, Category&#x3D;&quot;MySQL|Utils&quot;)\nstatic FString SelectByColumnsFormatSqlQuery(FString TableName, FString Columns);</code></pre></li>\n</ul>\n<h5 id=\"3-5-3-Select-Get-RowValues-By-Index\"><a href=\"#3-5-3-Select-Get-RowValues-By-Index\" class=\"headerlink\" title=\"3.5.3 Select Get RowValues By Index\"></a>3.5.3 Select Get RowValues By Index</h5><ul>\n<li><p>指定表面和表内的行号，查询数据</p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">&#x2F;*\n * TableName &#x3D; DataBase TableName\n * @return TArray&lt;FString&gt; &#x3D; Get All Rows -&gt; In All Columns Values\n*&#x2F;\t\t\nUFUNCTION(BlueprintPure, Category&#x3D;&quot;MySQL|Utils&quot;)\nstatic FQueryResultRow GetRowByIndex(const FQueryResultRows &amp;ResultRows, int32 RowIndex);</code></pre></li>\n</ul>\n","text":"UE4 MySQL插件使用1. 插件获取MySQL Plugin 提取码:17um 2. 插件安装 新建UE4项目，类型随意 在项目根目录中新建文件夹Plugins 将FH_MySQL复制到Plugins中 重新打开UE4项目 3. 插件API3.1 连接数据库 返回一个MySQ...","link":"","photos":[],"count_time":{"symbolsCount":"5.3k","symbolsTime":"5 mins."},"categories":[{"name":"UnrealEngine","slug":"UnrealEngine","count":9,"path":"api/categories/UnrealEngine.json"}],"tags":[{"name":"UnrealEngine","slug":"UnrealEngine","count":9,"path":"api/tags/UnrealEngine.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#UE4-MySQL%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">UE4 MySQL插件使用</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E6%8F%92%E4%BB%B6%E8%8E%B7%E5%8F%96\"><span class=\"toc-text\">1. 插件获取</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">2. 插件安装</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E6%8F%92%E4%BB%B6API\"><span class=\"toc-text\">3. 插件API</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-1-%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93\"><span class=\"toc-text\">3.1 连接数据库</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-%E8%8E%B7%E5%BE%97%E8%BF%9E%E6%8E%A5%E7%8A%B6%E6%80%81\"><span class=\"toc-text\">3.2 获得连接状态</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-3-%E5%85%B3%E9%97%AD%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5\"><span class=\"toc-text\">3.3 关闭数据库连接</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-4-%E5%A2%9E-%E5%88%A0-%E6%94%B9%E5%A4%84%E7%90%86\"><span class=\"toc-text\">3.4 增-删-改处理</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-4-1-Insert-Format-SqlQuery\"><span class=\"toc-text\">3.4.1 Insert Format SqlQuery</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-4-2-Update-Format-SqlQuery\"><span class=\"toc-text\">3.4.2 Update Format SqlQuery</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-4-3-Delete-Format-SqlQuery\"><span class=\"toc-text\">3.4.3 Delete Format SqlQuery</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-5-%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E5%A4%84%E7%90%86\"><span class=\"toc-text\">3.5 查询语句处理</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-5-1-Select-All-Format-SqlQuery\"><span class=\"toc-text\">3.5.1 Select All Format SqlQuery</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-5-2-Select-Columns-By-Conditions\"><span class=\"toc-text\">3.5.2 Select Columns By Conditions</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-5-3-Select-Get-RowValues-By-Index\"><span class=\"toc-text\">3.5.3 Select Get RowValues By Index</span></a></li></ol></li></ol></li></ol></li></ol></li></ol>","author":{"name":"FangH","slug":"blog-author","avatar":{"img":"/img/fh.png"},"link":"/","description":"我曾惊鸿一瞥未来","socials":{"github":"https://github.com/FHangH","twitter":"https://twitter.com/nUCFA2659We0pmu","stackoverflow":"https://stackoverflow.com/users/20173508/user20173508","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/zi-heng-18-99-47","csdn":"https://blog.csdn.net/weixin_44519692?spm=1000.2115.3001.5343","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"UE4 RPC","uid":"01b2c0831f95e39e5fd56ec4f69b86cb","slug":"7_UE4_RPC_04","date":"2022-10-06T07:28:25.953Z","updated":"2022-05-19T04:30:28.043Z","comments":true,"path":"api/articles/7_UE4_RPC_04.json","keywords":null,"cover":"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN/Post_Img_mini/postImg_26.jpg","text":"UE4 RPC1. RPC 架构1.1 架构简介 一个服务器， 一个或多个客户端 不能信任客户端，所有重要信息都需要通过服务器验证 Listen Server监听服务器和Dedicated Server专有服务器 1.2 基本GamePlay结构 Server GameMode ...","link":"","photos":[],"count_time":{"symbolsCount":"4.7k","symbolsTime":"4 mins."},"categories":[{"name":"UnrealEngine","slug":"UnrealEngine","count":9,"path":"api/categories/UnrealEngine.json"}],"tags":[{"name":"UnrealEngine","slug":"UnrealEngine","count":9,"path":"api/tags/UnrealEngine.json"}],"author":{"name":"FangH","slug":"blog-author","avatar":{"img":"/img/fh.png"},"link":"/","description":"我曾惊鸿一瞥未来","socials":{"github":"https://github.com/FHangH","twitter":"https://twitter.com/nUCFA2659We0pmu","stackoverflow":"https://stackoverflow.com/users/20173508/user20173508","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/zi-heng-18-99-47","csdn":"https://blog.csdn.net/weixin_44519692?spm=1000.2115.3001.5343","juejin":"","customs":{}}}},"next_post":{"title":"UE4 MySQL插件开发","uid":"ab5a123ef13f06a2127802a636203336","slug":"7_MySQL插件开发_02","date":"2022-10-06T07:28:25.948Z","updated":"2022-05-19T04:29:42.988Z","comments":true,"path":"api/articles/7_MySQL插件开发_02.json","keywords":null,"cover":"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN/Post_Img_mini/postImg_24.jpg","text":"UE4 MySQL插件开发1. 项目简介 个人UrealEngine MySQL Plugin开发流程 方便UnrealEngine项目链接和操作MySQL数据库 2. 项目环境IDE -&gt; JetBrains Rider 2022.1 EAP7 内部版本号 221.490...","link":"","photos":[],"count_time":{"symbolsCount":"15k","symbolsTime":"13 mins."},"categories":[{"name":"UnrealEngine","slug":"UnrealEngine","count":9,"path":"api/categories/UnrealEngine.json"}],"tags":[{"name":"UnrealEngine","slug":"UnrealEngine","count":9,"path":"api/tags/UnrealEngine.json"}],"author":{"name":"FangH","slug":"blog-author","avatar":{"img":"/img/fh.png"},"link":"/","description":"我曾惊鸿一瞥未来","socials":{"github":"https://github.com/FHangH","twitter":"https://twitter.com/nUCFA2659We0pmu","stackoverflow":"https://stackoverflow.com/users/20173508/user20173508","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/zi-heng-18-99-47","csdn":"https://blog.csdn.net/weixin_44519692?spm=1000.2115.3001.5343","juejin":"","customs":{}}}}}