{"title":"汇编_辅助C++","uid":"a6ccd9fe4a40d3d3e4e5ed99b6f169f1","slug":"11_汇编_辅助C++_01","date":"2022-10-06T07:28:25.978Z","updated":"2023-01-10T01:10:19.450Z","comments":true,"path":"api/articles/11_汇编_辅助C++_01.json","keywords":null,"cover":"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN_03@master/Aurora_ (29).webp","content":"<h1 id=\"汇编-辅助C\"><a href=\"#汇编-辅助C\" class=\"headerlink\" title=\"汇编_辅助C++\"></a>汇编_辅助C++</h1><p>[toc]</p>\n<ul>\n<li>汇编语言种类：x64汇编（64bit）</li>\n<li>书写格式：intel</li>\n<li>汇编不区分大小写</li>\n</ul>\n<h3 id=\"1-汇编格式了解\"><a href=\"#1-汇编格式了解\" class=\"headerlink\" title=\"1. 汇编格式了解\"></a>1. 汇编格式了解</h3><table>\n<thead>\n<tr>\n<th>项目</th>\n<th>intel</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>寄存器命名</td>\n<td><code>eax</code></td>\n<td>intel不带%</td>\n</tr>\n<tr>\n<td>操作数顺序</td>\n<td><code>mov edx, eax</code></td>\n<td>将eax的值赋值给edx</td>\n</tr>\n<tr>\n<td>常数\\立即数</td>\n<td><code>mov eax, 3</code><br /><code>mov eax, 0x10</code></td>\n<td>将3赋值给eax<br />将0x10赋值给eax</td>\n</tr>\n<tr>\n<td>jmp指令</td>\n<td><code>jmp edx</code><br /><code>jmp 0x4001002</code><br /><code>jmp [eax]</code></td>\n<td>在AT&amp;T的jmp地址前面加*</td>\n</tr>\n<tr>\n<td>操作数长度</td>\n<td><code>mov edx, eax</code><br /><code>mov al, 0x10</code><br /><code>lea ax, [dx + 0x10]</code></td>\n<td></td>\n</tr>\n</tbody></table>\n<h3 id=\"2-x64汇编-寄存器\"><a href=\"#2-x64汇编-寄存器\" class=\"headerlink\" title=\"2. x64汇编-寄存器\"></a>2. x64汇编-寄存器</h3><ul>\n<li>通用寄存器：(8字节, 1字节&#x3D;8位二进制)<ul>\n<li><code>16bit:</code> <code>AX</code>&#x2F;<code>BX</code>&#x2F;<code>CX</code>&#x2F;<code>DX</code></li>\n<li><code>32bit:</code> <code>EAX</code>&#x2F;<code>EBX</code>&#x2F;<code>ECX</code>&#x2F;<code>EDX</code></li>\n<li><code>64bit:</code> <code>RAX</code>&#x2F;<code>RBX</code>&#x2F;<code>RCX</code>&#x2F;<code>RDX</code></li>\n<li><code>64bit:</code> <code>RBP</code>&#x2F;<code>RSI</code>&#x2F;<code>RDI</code>&#x2F;<code>RSP</code>&#x2F;<code>R8</code>&#x2F;<code>R9</code>&#x2F;<code>R10</code>&#x2F;<code>R11</code>&#x2F;<code>R12</code>&#x2F;<code>R13</code>&#x2F;<code>R14</code>&#x2F;<code>R15</code></li>\n<li><code>64bit</code> 可以向下兼容 <code>32bit</code>，<code>64bit</code> 寄存就分一半就是 <code>32bit</code></li>\n</ul>\n</li>\n<li>兼容方式：<ul>\n<li><code>RAX</code>：<ul>\n<li><code>EAX</code>(低32bit -&gt; 4byte)</li>\n</ul>\n</li>\n<li><code>EAX</code>：<ul>\n<li><code>AX</code>(低16bit -&gt; 2byte)</li>\n</ul>\n</li>\n<li><code>AX</code>：<ul>\n<li><code>AH</code>(高8bit -&gt; 1byte)</li>\n<li><code>AL</code>(低8bit)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>一般规律：<ol>\n<li><code>R</code>，64bit，8字节</li>\n<li><code>E</code>，32bit，4字节</li>\n<li><code>A</code>，16bit，2字节</li>\n<li><code>AH</code>&#x2F;<code>AL</code>，8bit， 1字节</li>\n</ol>\n</li>\n</ul>\n<h3 id=\"3-内联汇编\"><a href=\"#3-内联汇编\" class=\"headerlink\" title=\"3. 内联汇编\"></a>3. 内联汇编</h3><ul>\n<li><p>在 cpp 文件中直接写 汇编代码，仅支持 x86</p>\n</li>\n<li><p>格式：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">__asm</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 汇编代码</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n</li>\n<li><p>代码示例1：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> a = <span class=\"number\">10</span>;</span><br><span class=\"line\">    __asm</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        mov eax, a</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight basic\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// mov eax, a =&gt; </span><br><span class=\"line\">// mov eax, dword ptr[a]</span><br><span class=\"line\">// 汇编中不存在 a， 只有 a 所在的地址</span><br><span class=\"line\"></span><br><span class=\"line\">__asm</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    mov eax, <span class=\"number\">10</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">// mov eax, <span class=\"number\">10</span> =&gt;</span><br><span class=\"line\">// mov eax, <span class=\"number\">0</span>Ah</span><br></pre></td></tr></table></figure>\n\n\n</li>\n<li><p>代码示例2：<code>10</code>是<code>10进制</code>，<code>16进制</code>是<code>0AH</code>，占用<code>1个字节</code>，需<code>放入AX</code>，<code>低位AL</code>中；<code>11223344H</code>是<code>8位</code>16进制，占用<code>4字节</code>，需<code>放入EAX</code>；</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    __asm</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        mov ax, <span class=\"number\">10</span></span><br><span class=\"line\">\tmov eax, <span class=\"number\">11223344</span>H</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight basic\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// mov ax, <span class=\"number\">10</span> =&gt;</span><br><span class=\"line\">// mov eax, <span class=\"number\">11223344</span>H</span><br><span class=\"line\">mov eax, <span class=\"number\">0</span>AH</span><br><span class=\"line\">mov eax, <span class=\"number\">11223344</span>H</span><br><span class=\"line\"></span><br><span class=\"line\">// mov ax, <span class=\"number\">0</span>AH</span><br><span class=\"line\">此时：ax 低位 al这 =&gt; <span class=\"number\">000</span>A</span><br><span class=\"line\">此时：eax =&gt; CCCC000A</span><br><span class=\"line\"></span><br><span class=\"line\">// mov eax, <span class=\"number\">11223344</span>H</span><br><span class=\"line\">此时：eax =&gt; <span class=\"number\">11223344</span></span><br><span class=\"line\">此时：ax =&gt; <span class=\"number\">00003344</span></span><br><span class=\"line\">此时：al =&gt; <span class=\"number\">3344</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"4-汇编语法\"><a href=\"#4-汇编语法\" class=\"headerlink\" title=\"4. 汇编语法\"></a>4. 汇编语法</h3><table>\n<thead>\n<tr>\n<th>语法</th>\n<th>解释</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>mov dest, src</code></td>\n<td><code>src</code>来源，<code>dest</code>目标，<code>mov</code>赋值</td>\n</tr>\n<tr>\n<td><code>[指针值]</code></td>\n<td>内存地址</td>\n</tr>\n<tr>\n<td><code>word</code>\\<code>dword</code>\\<code>qword</code></td>\n<td><code>word</code>2字节，<code>dword</code>4字节，<code>qword</code>8字节</td>\n</tr>\n<tr>\n<td><code>dword ptr</code></td>\n<td>指定内存大小</td>\n</tr>\n<tr>\n<td><code>call 函数地址</code></td>\n<td>调用函数</td>\n</tr>\n<tr>\n<td><code>lea dest, [地址值]</code></td>\n<td>类似与指针，将地址赋值给<code>dest</code></td>\n</tr>\n<tr>\n<td><code>ret</code></td>\n<td>函数返回</td>\n</tr>\n<tr>\n<td><code>xor op1, op2</code></td>\n<td>将 <code>op1</code> 和 <code>op2</code> 异或的结果给 <code>op1</code>，类似 <code>op1 = op1 ^ op2</code></td>\n</tr>\n<tr>\n<td><code>add op1, op2</code></td>\n<td><code>op1 = op1 + op2</code></td>\n</tr>\n<tr>\n<td><code>sub op1, op2</code></td>\n<td><code>op1 = op1 - op2</code></td>\n</tr>\n<tr>\n<td><code>inc op</code></td>\n<td>自增<code>op = op + 1</code></td>\n</tr>\n<tr>\n<td><code>dec op</code></td>\n<td>自减<code>op = op -1</code></td>\n</tr>\n<tr>\n<td><code>jmp 内存地址</code></td>\n<td>跳转到指定地址，执行机器码<br />一般配合<code>test</code>，<code>cmp</code>进行使用，<code>J</code>开头基本都是<code>jmp</code>的特殊形态<br /><code>jmp</code>是无条件跳转；<br /><code>jne : jump not equal</code></td>\n</tr>\n</tbody></table>\n<ul>\n<li><p>代码示例：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> a = <span class=\"number\">3</span>;</span><br><span class=\"line\">cout &lt;&lt; &amp;a &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// &amp;a = 010FFE4Ch</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\"># mov dword ptr [ebp-0Ch], 3</span></span><br><span class=\"line\"><span class=\"comment\">// ebp-0Ch 是 变量a 的地址</span></span><br><span class=\"line\"><span class=\"comment\">// ebp ：010FFE58h</span></span><br><span class=\"line\"><span class=\"comment\">// &amp;a : 010FFE4Ch == ebp-0Ch</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n","text":"汇编_辅助C++[toc] 汇编语言种类：x64汇编（64bit） 书写格式：intel 汇编不区分大小写 1. 汇编格式了解 项目 intel 说明 寄存器命...","permalink":"/post/11_汇编_辅助C++_01","photos":[],"count_time":{"symbolsCount":"2.2k","symbolsTime":"2 mins."},"categories":[{"name":"编程","slug":"编程","count":16,"path":"api/categories/编程.json"}],"tags":[{"name":"C/C++","slug":"C-C","count":10,"path":"api/tags/C-C.json"},{"name":"Assemly","slug":"Assemly","count":2,"path":"api/tags/Assemly.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%B1%87%E7%BC%96-%E8%BE%85%E5%8A%A9C\"><span class=\"toc-text\">汇编_辅助C++</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E6%B1%87%E7%BC%96%E6%A0%BC%E5%BC%8F%E4%BA%86%E8%A7%A3\"><span class=\"toc-text\">1. 汇编格式了解</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-x64%E6%B1%87%E7%BC%96-%E5%AF%84%E5%AD%98%E5%99%A8\"><span class=\"toc-text\">2. x64汇编-寄存器</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E5%86%85%E8%81%94%E6%B1%87%E7%BC%96\"><span class=\"toc-text\">3. 内联汇编</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4-%E6%B1%87%E7%BC%96%E8%AF%AD%E6%B3%95\"><span class=\"toc-text\">4. 汇编语法</span></a></li></ol></li></ol></li></ol>","author":{"name":"FangH","slug":"blog-author","avatar":"/img/fh.png","link":"/","description":"我曾惊鸿一瞥未来","socials":{"github":"https://github.com/FHangH","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/zi-heng-18-99-47","csdn":"https://blog.csdn.net/weixin_44519692?spm=1000.2115.3001.5343","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"UE4 NetWorking","uid":"c15d1216398d62840196d3f8cb97f0ec","slug":"7_UE4_NetWorking_11","date":"2022-11-10T01:24:59.447Z","updated":"2023-01-10T01:10:19.445Z","comments":true,"path":"api/articles/7_UE4_NetWorking_11.json","keywords":null,"cover":"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN_03@master/Aurora_ (31).webp","text":"UE4 NetWorking[toc] 1. Introduction 网络拓扑和NAT C++ Replication Low Level NetWorkin...","permalink":"/post/7_UE4_NetWorking_11","photos":[],"count_time":{"symbolsCount":"4.3k","symbolsTime":"4 mins."},"categories":[{"name":"UnrealEngine","slug":"UnrealEngine","count":12,"path":"api/categories/UnrealEngine.json"}],"tags":[{"name":"UnrealEngine","slug":"UnrealEngine","count":12,"path":"api/tags/UnrealEngine.json"}],"author":{"name":"FangH","slug":"blog-author","avatar":"/img/fh.png","link":"/","description":"我曾惊鸿一瞥未来","socials":{"github":"https://github.com/FHangH","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/zi-heng-18-99-47","csdn":"https://blog.csdn.net/weixin_44519692?spm=1000.2115.3001.5343","juejin":"","customs":{}}}},"next_post":{"title":"Java基础","uid":"3316961ecf1671c6065b043220187c47","slug":"10.Java基础","date":"2022-10-06T07:28:25.975Z","updated":"2023-01-10T01:10:19.450Z","comments":true,"path":"api/articles/10.Java基础.json","keywords":null,"cover":"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN_03@master/Aurora_ (28).webp","text":"Java基础[toc] 1. Java环境配置1.1 手动配置Java环境1.1.1 Oracle官网获得JDK Java-JDK 获得JDK，默认安装C盘即可...","permalink":"/post/10.Java基础","photos":[],"count_time":{"symbolsCount":"49k","symbolsTime":"45 mins."},"categories":[{"name":"编程","slug":"编程","count":16,"path":"api/categories/编程.json"}],"tags":[{"name":"Java","slug":"Java","count":1,"path":"api/tags/Java.json"}],"author":{"name":"FangH","slug":"blog-author","avatar":"/img/fh.png","link":"/","description":"我曾惊鸿一瞥未来","socials":{"github":"https://github.com/FHangH","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/zi-heng-18-99-47","csdn":"https://blog.csdn.net/weixin_44519692?spm=1000.2115.3001.5343","juejin":"","customs":{}}}}}