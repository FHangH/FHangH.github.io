{"title":"UE5成就系统插件","uid":"804797239f29f1915c4aabe46254e30a","slug":"7_15_UE5成就系统插件","date":"2024-02-29T06:19:33.375Z","updated":"2024-02-29T06:17:43.260Z","comments":true,"path":"api/articles/7_15_UE5成就系统插件.json","keywords":null,"cover":"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN_03@master/Aurora_ (37).webp","content":"<h1 id=\"UE5成就系统插件\"><a href=\"#UE5成就系统插件\" class=\"headerlink\" title=\"UE5成就系统插件\"></a>UE5成就系统插件</h1><p>[toc]</p>\n<h3 id=\"0-github\"><a href=\"#0-github\" class=\"headerlink\" title=\"0. github\"></a>0. github</h3><p><a href=\"https://github.com/FHangH/FH_Unreal_FH_AchievementSystem\">UE5成就系统插件</a></p>\n<h3 id=\"1-成就数据结构设计\"><a href=\"#1-成就数据结构设计\" class=\"headerlink\" title=\"1. 成就数据结构设计\"></a>1. 成就数据结构设计</h3><h4 id=\"1-1-成就等级\"><a href=\"#1-1-成就等级\" class=\"headerlink\" title=\"1.1 成就等级\"></a>1.1 成就等级</h4><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">UENUM</span>(BlueprintType)</span><br><span class=\"line\"><span class=\"keyword\">enum class</span> <span class=\"title class_\">EAchievementGrade</span> : uint8</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"function\">EAG_C\t<span class=\"title\">UMETA</span><span class=\"params\">(Displayname=<span class=\"string\">&quot;C&quot;</span>)</span>,</span></span><br><span class=\"line\"><span class=\"function\">\tEAG_B\t<span class=\"title\">UMETA</span><span class=\"params\">(Displayname=<span class=\"string\">&quot;B&quot;</span>)</span>,</span></span><br><span class=\"line\"><span class=\"function\">\tEAG_A\t<span class=\"title\">UMETA</span><span class=\"params\">(Displayname=<span class=\"string\">&quot;A&quot;</span>)</span>,</span></span><br><span class=\"line\"><span class=\"function\">\tEAG_S\t<span class=\"title\">UMETA</span><span class=\"params\">(Displayname=<span class=\"string\">&quot;S&quot;</span>)</span></span></span><br><span class=\"line\"><span class=\"function\">&#125;</span>;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"1-2-成就类型\"><a href=\"#1-2-成就类型\" class=\"headerlink\" title=\"1.2 成就类型\"></a>1.2 成就类型</h4><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">UENUM</span>(BlueprintType)</span><br><span class=\"line\"><span class=\"keyword\">enum class</span> <span class=\"title class_\">EAchievementType</span> : uint8</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"function\">EAT_OneTime\t\t<span class=\"title\">UMETA</span><span class=\"params\">(Displayname=<span class=\"string\">&quot;一次任务&quot;</span>)</span>,</span></span><br><span class=\"line\"><span class=\"function\">\tEAT_Cumulative\t<span class=\"title\">UMETA</span><span class=\"params\">(Displayname=<span class=\"string\">&quot;累计任务&quot;</span>)</span></span></span><br><span class=\"line\"><span class=\"function\">&#125;</span>;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"1-3-成就结构体\"><a href=\"#1-3-成就结构体\" class=\"headerlink\" title=\"1.3 成就结构体\"></a>1.3 成就结构体</h4><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">USTRUCT</span>(BlueprintType)</span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">FH_ACHIEVEMENTSYSTEM_API</span> FAchievement</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">GENERATED_USTRUCT_BODY</span>()</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"built_in\">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class=\"line\">\tint32 AchievementID&#123;<span class=\"number\">0</span>&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"built_in\">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class=\"line\">\tFString Name&#123;<span class=\"built_in\">TEXT</span>(<span class=\"string\">&quot;&quot;</span>)&#125;;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class=\"line\">\tFString Describe&#123;<span class=\"built_in\">TEXT</span>(<span class=\"string\">&quot;&quot;</span>)&#125;;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class=\"line\">\tEAchievementGrade EAG&#123;EAchievementGrade::EAG_C&#125;;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class=\"line\">\tUTexture2D* Image&#123;<span class=\"literal\">nullptr</span>&#125;;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class=\"line\">\tUMaterialInstance* ImageIns&#123;<span class=\"literal\">nullptr</span>&#125;;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class=\"line\">\tEAchievementType EAT&#123;EAchievementType::EAT_OneTime&#125;;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class=\"line\">\tint32 CurProgressCount&#123;<span class=\"number\">0</span>&#125;;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class=\"line\">\tint32 MaxProgressCount&#123;<span class=\"number\">1</span>&#125;;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class=\"line\">\t<span class=\"type\">bool</span> IsAchievement&#123;<span class=\"literal\">false</span>&#125;;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"1-4-成就结构源码\"><a href=\"#1-4-成就结构源码\" class=\"headerlink\" title=\"1.4 成就结构源码\"></a>1.4 成就结构源码</h4><p><code>AchievementData.h</code></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">pragma</span> once</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;CoreMinimal.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;AchievementData.generated.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">UENUM</span>(BlueprintType)</span><br><span class=\"line\"><span class=\"keyword\">enum class</span> <span class=\"title class_\">EAchievementGrade</span> : uint8</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"function\">EAG_C\t<span class=\"title\">UMETA</span><span class=\"params\">(Displayname=<span class=\"string\">&quot;C&quot;</span>)</span>,</span></span><br><span class=\"line\"><span class=\"function\">\tEAG_B\t<span class=\"title\">UMETA</span><span class=\"params\">(Displayname=<span class=\"string\">&quot;B&quot;</span>)</span>,</span></span><br><span class=\"line\"><span class=\"function\">\tEAG_A\t<span class=\"title\">UMETA</span><span class=\"params\">(Displayname=<span class=\"string\">&quot;A&quot;</span>)</span>,</span></span><br><span class=\"line\"><span class=\"function\">\tEAG_S\t<span class=\"title\">UMETA</span><span class=\"params\">(Displayname=<span class=\"string\">&quot;S&quot;</span>)</span></span></span><br><span class=\"line\"><span class=\"function\">&#125;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">UENUM</span>(BlueprintType)</span><br><span class=\"line\"><span class=\"keyword\">enum class</span> <span class=\"title class_\">EAchievementType</span> : uint8</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"function\">EAT_OneTime\t\t<span class=\"title\">UMETA</span><span class=\"params\">(Displayname=<span class=\"string\">&quot;一次任务&quot;</span>)</span>,</span></span><br><span class=\"line\"><span class=\"function\">\tEAT_Cumulative\t<span class=\"title\">UMETA</span><span class=\"params\">(Displayname=<span class=\"string\">&quot;累计任务&quot;</span>)</span></span></span><br><span class=\"line\"><span class=\"function\">&#125;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">USTRUCT</span>(BlueprintType)</span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">FH_ACHIEVEMENTSYSTEM_API</span> FAchievement</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">GENERATED_USTRUCT_BODY</span>()</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"built_in\">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class=\"line\">\tint32 AchievementID&#123;<span class=\"number\">0</span>&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"built_in\">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class=\"line\">\tFString Name&#123;<span class=\"built_in\">TEXT</span>(<span class=\"string\">&quot;&quot;</span>)&#125;;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class=\"line\">\tFString Describe&#123;<span class=\"built_in\">TEXT</span>(<span class=\"string\">&quot;&quot;</span>)&#125;;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class=\"line\">\tEAchievementGrade EAG&#123;EAchievementGrade::EAG_C&#125;;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class=\"line\">\tUTexture2D* Image&#123;<span class=\"literal\">nullptr</span>&#125;;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class=\"line\">\tUMaterialInstance* ImageIns&#123;<span class=\"literal\">nullptr</span>&#125;;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class=\"line\">\tEAchievementType EAT&#123;EAchievementType::EAT_OneTime&#125;;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class=\"line\">\tint32 CurProgressCount&#123;<span class=\"number\">0</span>&#125;;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class=\"line\">\tint32 MaxProgressCount&#123;<span class=\"number\">1</span>&#125;;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class=\"line\">\t<span class=\"type\">bool</span> IsAchievement&#123;<span class=\"literal\">false</span>&#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">static</span> TMap&lt;int32, FAchievement&gt; AchievementsList&#123;&#125;;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"2-成就系统API\"><a href=\"#2-成就系统API\" class=\"headerlink\" title=\"2. 成就系统API\"></a>2. 成就系统API</h3><p><code>FH_FuncLib_AS.h</code></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">pragma</span> once</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;CoreMinimal.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;Kismet/BlueprintFunctionLibrary.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;AchievementData.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;FH_FuncLib_AS.generated.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">UCLASS</span>(BlueprintType)</span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">FH_ACHIEVEMENTSYSTEM_API</span> UFH_FuncLib_AS : <span class=\"keyword\">public</span> UBlueprintFunctionLibrary</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">GENERATED_BODY</span>()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* My Code */</span></span><br><span class=\"line\">\t<span class=\"comment\">/* Function */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"comment\">// 判断成就是否存在</span></span><br><span class=\"line\">\t<span class=\"built_in\">UFUNCTION</span>(BlueprintPure, Category=<span class=\"string\">&quot;FH|Achievement&quot;</span>)</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"type\">static</span> <span class=\"type\">bool</span> <span class=\"title\">IsAchievementExists</span><span class=\"params\">(<span class=\"type\">const</span> int32 AchievementID)</span></span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"comment\">// 添加新成就</span></span><br><span class=\"line\">\t<span class=\"built_in\">UFUNCTION</span>(BlueprintCallable, Category=<span class=\"string\">&quot;FH|Achievement&quot;</span>)</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"type\">static</span> <span class=\"type\">bool</span> <span class=\"title\">AddAchievement</span><span class=\"params\">(<span class=\"type\">const</span> FAchievement&amp; NewAchievement)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 移除成就</span></span><br><span class=\"line\">\t<span class=\"built_in\">UFUNCTION</span>(BlueprintCallable, Category=<span class=\"string\">&quot;FH|Achievement&quot;</span>)</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"type\">static</span> <span class=\"type\">bool</span> <span class=\"title\">RemoveAchievement</span><span class=\"params\">(<span class=\"type\">const</span> int32 AchievementID)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 获取所有存在的成就的列表</span></span><br><span class=\"line\">\t<span class=\"built_in\">UFUNCTION</span>(BlueprintPure, Category=<span class=\"string\">&quot;FH|Achievement&quot;</span>)</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"type\">static</span> TMap&lt;int32, FAchievement&gt; <span class=\"title\">GetAchievementsList</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 清除所有存在成就的列表</span></span><br><span class=\"line\">\t<span class=\"built_in\">UFUNCTION</span>(BlueprintPure, Category=<span class=\"string\">&quot;FH|Achievement&quot;</span>)</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"type\">static</span> <span class=\"type\">bool</span> <span class=\"title\">ClearAchievementsList</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 获取所有成就</span></span><br><span class=\"line\">\t<span class=\"built_in\">UFUNCTION</span>(BlueprintCallable, Category=<span class=\"string\">&quot;FH|Achievement&quot;</span>)</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"type\">static</span> <span class=\"type\">void</span> <span class=\"title\">GetAllAchievements</span><span class=\"params\">(TArray&lt;FAchievement&gt;&amp; Achievements)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// 完成一次成就</span></span><br><span class=\"line\">\t<span class=\"built_in\">UFUNCTION</span>(BlueprintCallable, Category=<span class=\"string\">&quot;FH|Achievement&quot;</span>)</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"type\">static</span> <span class=\"type\">void</span> <span class=\"title\">DoOnceTask</span><span class=\"params\">(<span class=\"type\">const</span> int32 AchievementID, int32&amp; ID, <span class=\"type\">bool</span>&amp; IsDoOver)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 判断成就是否完成</span></span><br><span class=\"line\">\t<span class=\"built_in\">UFUNCTION</span>(BlueprintPure, Category=<span class=\"string\">&quot;FH|Achievement&quot;</span>)</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"type\">static</span> <span class=\"type\">void</span> <span class=\"title\">IsAchievementComplete</span><span class=\"params\">(int32 AchievementID, <span class=\"type\">bool</span>&amp; IsComplete)</span></span>;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n\n\n<div class=\"custom-quote warning\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12 8V13\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12 15.99V16.01\"></path>\n</svg>\n</span>\n<p class=\"custom-quote-title\">注意</p>\n<p><ol>\n<li>添加新成就需要保证赋予全局唯一的ID，该成就系统依旧ID辨别成就和获取</li>\n<li>移除不需要的成就也是通过ID进行移除</li>\n<li>无论是否是一次性成就，在执行<code>DoOnceTask</code>后，都应该立刻使用<code>IsAchievementComplete</code>判断成就是否完成</li>\n</ol>\n</p>\n</div>\n<p><code>FH_FuncLib_AS.cpp</code></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;FH_FuncLib_AS.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Add And Remove Achievement List</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">UFH_FuncLib_AS::IsAchievementExists</span><span class=\"params\">(<span class=\"type\">const</span> int32 AchievementID)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (AchievementsList.<span class=\"built_in\">IsEmpty</span>()) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (AchievementsList.<span class=\"built_in\">Find</span>(AchievementID)) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">UFH_FuncLib_AS::AddAchievement</span><span class=\"params\">(<span class=\"type\">const</span> FAchievement&amp; NewAchievement)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (AchievementsList.<span class=\"built_in\">Find</span>(NewAchievement.AchievementID)) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">\tAchievementsList.<span class=\"built_in\">Add</span>(NewAchievement.AchievementID, NewAchievement);</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">UFH_FuncLib_AS::RemoveAchievement</span><span class=\"params\">(<span class=\"type\">const</span> int32 AchievementID)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (AchievementsList.<span class=\"built_in\">IsEmpty</span>()) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (AchievementsList.<span class=\"built_in\">Find</span>(AchievementID))</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tAchievementsList.<span class=\"built_in\">Remove</span>(AchievementID);</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">TMap&lt;int32, FAchievement&gt; <span class=\"title\">UFH_FuncLib_AS::GetAchievementsList</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> AchievementsList;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">UFH_FuncLib_AS::ClearAchievementsList</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tAchievementsList.<span class=\"built_in\">Empty</span>();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (AchievementsList.<span class=\"built_in\">IsEmpty</span>()) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">UFH_FuncLib_AS::GetAllAchievements</span><span class=\"params\">(TArray&lt;FAchievement&gt;&amp; Achievements)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tAchievementsList.<span class=\"built_in\">GenerateValueArray</span>(Achievements);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Complete Task</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">UFH_FuncLib_AS::DoOnceTask</span><span class=\"params\">(<span class=\"type\">const</span> int32 AchievementID, int32&amp; ID, <span class=\"type\">bool</span>&amp; IsDoOver)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"built_in\">IsAchievementExists</span>(AchievementID))</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tIsDoOver = <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"type\">const</span> <span class=\"keyword\">auto</span> Achievement = AchievementsList.<span class=\"built_in\">Find</span>(AchievementID);</span><br><span class=\"line\">\tID = AchievementID;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (Achievement-&gt;IsAchievement &amp;&amp; Achievement-&gt;CurProgressCount == Achievement-&gt;MaxProgressCount)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tIsDoOver = <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">switch</span> (Achievement-&gt;EAT)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">case</span> EAchievementType::EAT_OneTime:</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\tAchievement-&gt;CurProgressCount = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t\tAchievement-&gt;IsAchievement = <span class=\"literal\">true</span>;</span><br><span class=\"line\">\t\t\tIsDoOver = <span class=\"literal\">true</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">case</span> EAchievementType::EAT_Cumulative:</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\tAchievement-&gt;CurProgressCount += <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t\tIsDoOver = <span class=\"literal\">true</span>;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (Achievement-&gt;CurProgressCount == Achievement-&gt;MaxProgressCount)</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\tAchievement-&gt;IsAchievement = <span class=\"literal\">true</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">default</span>:</span><br><span class=\"line\">\t\tIsDoOver = <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">UFH_FuncLib_AS::IsAchievementComplete</span><span class=\"params\">(<span class=\"type\">const</span> int32 AchievementID, <span class=\"type\">bool</span>&amp; IsComplete)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"built_in\">IsAchievementExists</span>(AchievementID))</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tIsComplete = <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"type\">const</span> <span class=\"keyword\">auto</span> Achievement = AchievementsList.<span class=\"built_in\">Find</span>(AchievementID);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (Achievement-&gt;IsAchievement &amp;&amp; Achievement-&gt;CurProgressCount == Achievement-&gt;MaxProgressCount)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tIsComplete = <span class=\"literal\">true</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tIsComplete = <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","text":"UE5成就系统插件[toc] 0. githubUE5成就系统插件 1. 成就数据结构设计1.1 成就等级12345678UENUM(BlueprintType...","permalink":"/post/7_15_UE5成就系统插件","photos":[],"count_time":{"symbolsCount":"7.7k","symbolsTime":"7 mins."},"categories":[{"name":"UnrealEngine","slug":"UnrealEngine","count":23,"path":"api/categories/UnrealEngine.json"},{"name":"Plugin","slug":"UnrealEngine/Plugin","count":8,"path":"api/categories/UnrealEngine/Plugin.json"}],"tags":[{"name":"UnrealEngine","slug":"UnrealEngine","count":23,"path":"api/tags/UnrealEngine.json"},{"name":"Plugin","slug":"Plugin","count":10,"path":"api/tags/Plugin.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#UE5%E6%88%90%E5%B0%B1%E7%B3%BB%E7%BB%9F%E6%8F%92%E4%BB%B6\"><span class=\"toc-text\">UE5成就系统插件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0-github\"><span class=\"toc-text\">0. github</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E6%88%90%E5%B0%B1%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1\"><span class=\"toc-text\">1. 成就数据结构设计</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-1-%E6%88%90%E5%B0%B1%E7%AD%89%E7%BA%A7\"><span class=\"toc-text\">1.1 成就等级</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-2-%E6%88%90%E5%B0%B1%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">1.2 成就类型</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-3-%E6%88%90%E5%B0%B1%E7%BB%93%E6%9E%84%E4%BD%93\"><span class=\"toc-text\">1.3 成就结构体</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-4-%E6%88%90%E5%B0%B1%E7%BB%93%E6%9E%84%E6%BA%90%E7%A0%81\"><span class=\"toc-text\">1.4 成就结构源码</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E6%88%90%E5%B0%B1%E7%B3%BB%E7%BB%9FAPI\"><span class=\"toc-text\">2. 成就系统API</span></a></li></ol></li></ol></li></ol>","author":{"name":"FangH","slug":"blog-author","avatar":"/img/fh.png","link":"/","description":"我曾惊鸿一瞥未来","socials":{"github":"https://github.com/FHangH","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/zi-heng-18-99-47","csdn":"https://blog.csdn.net/weixin_44519692?spm=1000.2115.3001.5343","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"UE5读写本地文件插件","uid":"3b49e1f8d2f5273a7fca0d8ae0702bad","slug":"7_16_UE5读写本地文件插件","date":"2024-02-29T06:19:33.378Z","updated":"2024-02-29T06:17:59.676Z","comments":true,"path":"api/articles/7_16_UE5读写本地文件插件.json","keywords":null,"cover":"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN_03@master/Aurora_ (38).webp","text":"UE5读写本地文件插件[toc] 0. githubUE5读写本地文件插件 1. APIReadWriteLocalFile.h 123456789101112...","permalink":"/post/7_16_UE5读写本地文件插件","photos":[],"count_time":{"symbolsCount":"8.7k","symbolsTime":"8 mins."},"categories":[{"name":"UnrealEngine","slug":"UnrealEngine","count":23,"path":"api/categories/UnrealEngine.json"},{"name":"Plugin","slug":"UnrealEngine/Plugin","count":8,"path":"api/categories/UnrealEngine/Plugin.json"}],"tags":[{"name":"UnrealEngine","slug":"UnrealEngine","count":23,"path":"api/tags/UnrealEngine.json"},{"name":"Plugin","slug":"Plugin","count":10,"path":"api/tags/Plugin.json"}],"author":{"name":"FangH","slug":"blog-author","avatar":"/img/fh.png","link":"/","description":"我曾惊鸿一瞥未来","socials":{"github":"https://github.com/FHangH","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/zi-heng-18-99-47","csdn":"https://blog.csdn.net/weixin_44519692?spm=1000.2115.3001.5343","juejin":"","customs":{}}}},"next_post":{"title":"UE5 PCG","uid":"590f53223cc4744b794510d1af5af7fa","slug":"7_13_UE5_PCG","date":"2024-02-22T08:26:40.575Z","updated":"2024-02-22T08:29:33.556Z","comments":true,"path":"api/articles/7_13_UE5_PCG.json","keywords":null,"cover":"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN_03@master/Aurora_ (35).webp","text":"PCG[toc] 1. 基础地形采样形式 基础地形采样形式 功能效果描述 Surface Sampler 方形内创建生成植物密度,可设置铺满全场景配置不高的别试...","permalink":"/post/7_13_UE5_PCG","photos":[],"count_time":{"symbolsCount":"6.2k","symbolsTime":"6 mins."},"categories":[{"name":"UnrealEngine","slug":"UnrealEngine","count":23,"path":"api/categories/UnrealEngine.json"}],"tags":[{"name":"UnrealEngine","slug":"UnrealEngine","count":23,"path":"api/tags/UnrealEngine.json"}],"author":{"name":"FangH","slug":"blog-author","avatar":"/img/fh.png","link":"/","description":"我曾惊鸿一瞥未来","socials":{"github":"https://github.com/FHangH","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/zi-heng-18-99-47","csdn":"https://blog.csdn.net/weixin_44519692?spm=1000.2115.3001.5343","juejin":"","customs":{}}}}}