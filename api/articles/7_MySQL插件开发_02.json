{"title":"UE4 MySQL插件开发","uid":"ab5a123ef13f06a2127802a636203336","slug":"7_MySQL插件开发_02","date":"2022-10-06T07:28:25.948Z","updated":"2022-05-19T04:29:42.988Z","comments":true,"path":"api/articles/7_MySQL插件开发_02.json","keywords":null,"cover":"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN/Post_Img_mini/postImg_24.jpg","content":"<h1 id=\"UE4-MySQL插件开发\"><a href=\"#UE4-MySQL插件开发\" class=\"headerlink\" title=\"UE4 MySQL插件开发\"></a>UE4 MySQL插件开发</h1><h3 id=\"1-项目简介\"><a href=\"#1-项目简介\" class=\"headerlink\" title=\"1. 项目简介\"></a>1. 项目简介</h3><ul>\n<li>个人<code>UrealEngine MySQL Plugin</code>开发流程</li>\n<li>方便<code>UnrealEngine</code>项目<code>链接</code>和<code>操作</code>MySQL数据库</li>\n</ul>\n<h3 id=\"2-项目环境\"><a href=\"#2-项目环境\" class=\"headerlink\" title=\"2. 项目环境\"></a>2. 项目环境</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">IDE -&gt; JetBrains Rider 2022.1 EAP7 内部版本号 221.4906.10\nUnrealEngine -&gt; 4.27.2\nCompiler Environment -&gt; Visual Studio 2022 提供编译组件\nMySQL -&gt; 8.0.28 MySQL Community Server - GPL</code></pre>\n\n\n\n\n\n<h3 id=\"3-项目资源\"><a href=\"#3-项目资源\" class=\"headerlink\" title=\"3. 项目资源\"></a>3. 项目资源</h3><h4 id=\"3-1-资源文件结构\"><a href=\"#3-1-资源文件结构\" class=\"headerlink\" title=\"3.1 资源文件结构\"></a>3.1 资源文件结构</h4><pre class=\"line-numbers language-none\"><code class=\"language-none\">ConnectorLibs\n\t- ConnectorLibs\n\t\t+ include\n\t\t+ lib\n\t- ConnectorLibs.Build.cs</code></pre>\n\n\n\n\n\n<h4 id=\"3-2-资源链接\"><a href=\"#3-2-资源链接\" class=\"headerlink\" title=\"3.2 资源链接\"></a>3.2 资源链接</h4><p>「ConnectorLibs」<a href=\"https://www.aliyundrive.com/s/wTrvzpVdfxU\">https://www.aliyundrive.com/s/wTrvzpVdfxU</a> 提取码: 0be0</p>\n<h3 id=\"4-项目创建\"><a href=\"#4-项目创建\" class=\"headerlink\" title=\"4. 项目创建\"></a>4. 项目创建</h3><h4 id=\"4-1-创建UE4项目\"><a href=\"#4-1-创建UE4项目\" class=\"headerlink\" title=\"4.1 创建UE4项目\"></a>4.1 创建UE4项目</h4><ol>\n<li>默认选择<code>游戏项目</code></li>\n<li>默认选择<code>空项目</code></li>\n<li>创建<code>C++项目</code>，包含<code>初学者内容包</code></li>\n<li>选择项目的创建目录</li>\n<li>创建项目名<code>FH_TestMySQL</code></li>\n</ol>\n<h4 id=\"4-2-创建新插件\"><a href=\"#4-2-创建新插件\" class=\"headerlink\" title=\"4.2 创建新插件\"></a>4.2 创建新插件</h4><ol>\n<li>找到<code>Edit</code>或<code>Settings</code></li>\n<li>选择<code>plugins</code>进入插件界面</li>\n<li>选择<code>New Plugin</code></li>\n<li>选择<code>Blank</code></li>\n<li>设置插件名称<code>FH_MySQL</code></li>\n<li><code>Descriptor Data</code>随意填写</li>\n<li><code>Create Plugin</code></li>\n</ol>\n<h4 id=\"4-3-创建MySQL-C-类\"><a href=\"#4-3-创建MySQL-C-类\" class=\"headerlink\" title=\"4.3 创建MySQL C++类\"></a>4.3 创建MySQL C++类</h4><h5 id=\"4-3-1-FH-ConnectionObject\"><a href=\"#4-3-1-FH-ConnectionObject\" class=\"headerlink\" title=\"4.3.1 FH_ConnectionObject\"></a>4.3.1 FH_ConnectionObject</h5><ol>\n<li>创建<code>Object</code>C++类，类名<code>FH_ConnectionObject</code></li>\n<li>选择添加到插件目录<code>FH_MySQL(Runtime)</code>，默认<code>public .h，private .cpp</code></li>\n<li><code>Create Class</code></li>\n<li>会弹出一个<code>Message</code>窗口，内容大致为<code>创建成功，但需要重新编译</code>，选择<code>No</code></li>\n</ol>\n<h5 id=\"4-3-2-BPFuncLib-FHSQL\"><a href=\"#4-3-2-BPFuncLib-FHSQL\" class=\"headerlink\" title=\"4.3.2 BPFuncLib_FHSQL\"></a>4.3.2 BPFuncLib_FHSQL</h5><ol>\n<li>创建<code>Blueprint Function Library</code>C++类，类名<code>BPFuncLib_FHSQL</code></li>\n<li>剩下步骤同上</li>\n</ol>\n<h3 id=\"5-项目配置\"><a href=\"#5-项目配置\" class=\"headerlink\" title=\"5. 项目配置\"></a>5. 项目配置</h3><h4 id=\"5-1-引入MySQL环境库\"><a href=\"#5-1-引入MySQL环境库\" class=\"headerlink\" title=\"5.1 引入MySQL环境库\"></a>5.1 引入MySQL环境库</h4><h5 id=\"5-1-1-导入环境库\"><a href=\"#5-1-1-导入环境库\" class=\"headerlink\" title=\"5.1.1 导入环境库\"></a>5.1.1 导入环境库</h5><ol>\n<li>准备好<code>ConnectorLibs</code></li>\n<li>来到<code>FH_TestMySQL\\Plugins\\FH_MySQL\\Source</code>目录下</li>\n<li>创建目录<code>ThirdParty</code></li>\n<li>将<code>ConnectorLibs</code>放入<code>ThirdParty</code>内</li>\n</ol>\n<h5 id=\"5-1-2-配置项目属性\"><a href=\"#5-1-2-配置项目属性\" class=\"headerlink\" title=\"5.1.2 配置项目属性\"></a>5.1.2 配置项目属性</h5><ol>\n<li><code>Rider</code>打开创建好的UE4 C++项目</li>\n<li>在资源栏内找到项目名<code>FH_TestMySQL</code>，在<code>Games</code>目录下</li>\n<li>右键，选择<code>Properties</code></li>\n<li>在<code>Configurations</code>内选择<code>Development_Editor | x64</code></li>\n<li>选择<code>VC++目录</code></li>\n<li>在<code>包含目录(include)</code>中填入绝对路径<code>项目文件路径\\FH_TestMySQL\\Plugins\\FH_MySQL\\Source\\ThirdParty\\ConnectorLibs\\include</code></li>\n<li>在<code>库目录(lib)</code>中填入绝对路径<code>项目文件路径\\FH_TestMySQL\\Plugins\\FH_MySQL\\Source\\ThirdParty\\ConnectorLibs\\lib</code></li>\n<li><code>OK</code></li>\n</ol>\n<h5 id=\"5-1-3-配置项目文件\"><a href=\"#5-1-3-配置项目文件\" class=\"headerlink\" title=\"5.1.3 配置项目文件\"></a>5.1.3 配置项目文件</h5><ol>\n<li><p>修改<code>FH_MySQL.uplugin</code>，文件位置<code>项目文件路径\\FH_TestMySQL\\Plugins\\FH_MySQL</code>，只需要添加<code>&quot;WhitelistPlatforms&quot;: [&quot;Win64&quot;]</code></p>\n<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\">&#123;\n\t&quot;FileVersion&quot;: 3,\n\t&quot;Version&quot;: 1,\n\t&quot;VersionName&quot;: &quot;1.0&quot;,\n\t&quot;FriendlyName&quot;: &quot;FH_MySQL&quot;,\n\t&quot;Description&quot;: &quot;Using UE4 Connecting MySQL Plugin&quot;,\n\t&quot;Category&quot;: &quot;FhPlugin&quot;,\n\t&quot;CreatedBy&quot;: &quot;FangH&quot;,\n\t&quot;CreatedByURL&quot;: &quot;https:&#x2F;&#x2F;fhangh.gitee.io&#x2F;&quot;,\n\t&quot;DocsURL&quot;: &quot;&quot;,\n\t&quot;MarketplaceURL&quot;: &quot;&quot;,\n\t&quot;SupportURL&quot;: &quot;&quot;,\n\t&quot;CanContainContent&quot;: true,\n\t&quot;IsBetaVersion&quot;: true,\n\t&quot;IsExperimentalVersion&quot;: false,\n\t&quot;Installed&quot;: false,\n\t&quot;Modules&quot;: [\n\t\t&#123;\n\t\t\t&quot;Name&quot;: &quot;FH_MySQL&quot;,\n\t\t\t&quot;Type&quot;: &quot;Runtime&quot;,\n\t\t\t&quot;LoadingPhase&quot;: &quot;Default&quot;,\n\t\t\t&quot;WhitelistPlatforms&quot;: [&quot;Win64&quot;]\n\t\t&#125;\n\t]\n&#125;</code></pre>\n</li>\n<li><p>修改<code>FH_MySQL.Build.cs</code>，文件位置<code>项目文件路径\\FH_TestMySQL\\Plugins\\FH_MySQL\\Source\\FH_MySQL</code>，修改如下内容</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">PublicDependencyModuleNames.AddRange(\n\tnew string[]\n    &#123;\n\t\t&quot;Core&quot;,\n\t\t&quot;ConnectorLibs&quot;,\n\t\t&#x2F;&#x2F; ... add other public dependencies that you statically link with here ...\n\t&#125;\n);</code></pre></li>\n</ol>\n<h3 id=\"6-MySQL-C-文件\"><a href=\"#6-MySQL-C-文件\" class=\"headerlink\" title=\"6. MySQL C++文件\"></a>6. MySQL C++文件</h3><h4 id=\"6-1-MySQL连接对象\"><a href=\"#6-1-MySQL连接对象\" class=\"headerlink\" title=\"6.1 MySQL连接对象\"></a>6.1 MySQL连接对象</h4><ul>\n<li><p><code>FH_ConnectionObject.h</code></p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">#pragma once\n\n#include &quot;CoreMinimal.h&quot;\n#include &quot;UObject&#x2F;NoExportTypes.h&quot;\n#include &quot;mysql.h&quot;\n#include &quot;FH_ConnectionObject.generated.h&quot;\n\nUCLASS(BlueprintType)\nclass FH_MYSQL_API UFH_ConnectionObject : public UObject\n&#123;\n\tGENERATED_BODY()\n\nprivate:\n\tUFH_ConnectionObject();\n\npublic:\n\tMYSQL *Fh_ConnMysql;\n&#125;;</code></pre>\n</li>\n<li><p><code>FH_ConnectionObject.cpp</code></p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">#include &quot;FH_ConnectionObject.h&quot;\n\nUFH_ConnectionObject::UFH_ConnectionObject()\n&#123;\n\tFh_ConnMysql &#x3D; nullptr;\n&#125;</code></pre></li>\n</ul>\n<h4 id=\"6-2-MySQL函数工具库\"><a href=\"#6-2-MySQL函数工具库\" class=\"headerlink\" title=\"6.2 MySQL函数工具库\"></a>6.2 MySQL函数工具库</h4><ul>\n<li><p><code>BPFuncLib_FHSQL.h</code></p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">#pragma once\n\n#include &quot;CoreMinimal.h&quot;\n#include &quot;Kismet&#x2F;BlueprintFunctionLibrary.h&quot;\n#include &quot;FH_ConnectionObject.h&quot;\n#include &quot;BPFuncLib_FHSQL.generated.h&quot;\n\nUSTRUCT(BlueprintType)\nstruct FQueryResultRow\n&#123;\n\tGENERATED_BODY()\n\n\tUPROPERTY(BlueprintReadWrite, Category&#x3D;&quot;MySQL|Result Row Value&quot;)\n\tTArray&lt;FString&gt; RowValue;\n&#125;;\n\nUSTRUCT(BlueprintType)\nstruct FQueryResultRows\n&#123;\n\tGENERATED_BODY()\n\n\tUPROPERTY(BlueprintReadWrite, Category&#x3D;&quot;MySQL|Result Rows Value&quot;)\n\tTArray&lt;FQueryResultRow&gt; RowsValue;\n&#125;;\n\nUCLASS(BlueprintType)\nclass FH_MYSQL_API UBPFuncLib_FHSQL : public UBlueprintFunctionLibrary\n&#123;\n\tGENERATED_BODY()\n\npublic:\n\t&#x2F;*\n\t * Connection &#x3D;&#x3D; MySQL Object\n\t * @return *UFH_ConnectionObject &#x3D;&#x3D; MySQL Connector\n\t *&#x2F;\n\tUFUNCTION(BlueprintCallable, Category&#x3D;&quot;MySQL|Utils&quot;)\n\tstatic UFH_ConnectionObject *ConnectToMySQL(FString Host, FString UserName, FString PassWord, FString DBName,\n\t\t\t\t\t\t\t\t\t\t\t\tint32 Port, FString &amp;ConnectMessage);\n\n\t&#x2F;*\n\t * ConnectionObject &#x3D;&#x3D; MySQL Object\n\t * @return bool &#x3D;&#x3D; ConnectionState\n\t *&#x2F;\n\tUFUNCTION(BlueprintCallable, Category&#x3D;&quot;MySQL|Utils&quot;)\n\tstatic bool GetConnectionState(UFH_ConnectionObject *ConnectionObject);\n\n\t&#x2F;*\n\t * ConnectionObject &#x3D;&#x3D; MySQL Object\n\t * @return bool &#x3D;&#x3D; ConnectionState\n\t *&#x2F;\n\tUFUNCTION(BlueprintCallable, Category&#x3D;&quot;MySQL|Utils&quot;)\n\tstatic bool CloseConnection(UFH_ConnectionObject *ConnectionObject);\n\n\t&#x2F;*\n\t * ConnectionObject &#x3D;&#x3D; MySQL Object\n\t * @return bool &#x3D;&#x3D; Insert, Update, Delete Data Is Succeed Or Failed\n\t *&#x2F;\n\tUFUNCTION(BlueprintCallable, Category&#x3D;&quot;MySQL|Utils&quot;)\n\tstatic bool ActionOnTableData(UFH_ConnectionObject *ConnectionObject, FString SqlQuery);\n\t\n\t&#x2F;*\n\t * TableName &#x3D; DataBase TableName\n\t * InsertValues &#x3D; MySQL Insert Values to Table\n\t * @return FString &#x3D; MySQL Insert Query -&gt; Insert\n\t *&#x2F;\n\tUFUNCTION(BlueprintPure, Category&#x3D;&quot;MySQL|Utils&quot;)\n\tstatic FString InsertFormatSqlQuery(FString TableName, FString InsertValues);\n\n\t&#x2F;*\n\t * TableName &#x3D; DataBase TableName\n\t * RowName &#x3D; Need Update Row\n\t * @return FString &#x3D; MySQL Update Query -&gt; Update\n\t *&#x2F;\t\n\tUFUNCTION(BlueprintPure, Category&#x3D;&quot;MySQL|Utils&quot;)\n\tstatic FString UpdateAllFormatSqlQuery(FString TableName, FString RowName, FString UpdateValue);\n\n\t&#x2F;*\n\t * TableName &#x3D; DataBase TableName\n\t * RowName &#x3D; Need Update Row\n\t * WhereName &#x3D; Update Where\n\t * WhereSymbol &#x3D; Operator Or Symbol\n\t * WhereValue &#x3D; Condition Name\n\t * UpdateValue &#x3D; Need Update Date Value\n\t * @return FString &#x3D; MySQL Update Query -&gt; Update\n\t *&#x2F;\t\n\tUFUNCTION(BlueprintPure, Category&#x3D;&quot;MySQL|Utils&quot;)\n\tstatic FString UpdateByWhereFormatSqlQuery(FString TableName, FString RowName, FString WhereName, FString WhereSymbol, FString WhereValue, FString UpdateValue);\n\n\t&#x2F;*\n\t * TableName &#x3D; DataBase TableName\n\t * @return FString &#x3D; MySQL Delete Query -&gt; Delete\n\t *&#x2F;\n\tUFUNCTION(BlueprintPure, Category&#x3D;&quot;MySQL|Utils&quot;)\n\tstatic FString DeleteAllFormatSqlQuery(FString TableName);\n\n\t&#x2F;*\n\t * TableName &#x3D; DataBase TableName\n\t * WhereName &#x3D; Update Where\n\t * WhereSymbol &#x3D; Operator Or Symbol\n\t * WhereValue &#x3D; Condition Name\n\t * @return FString &#x3D; MySQL Delete Query -&gt; Delete\n\t *&#x2F;\n\tUFUNCTION(BlueprintPure, Category&#x3D;&quot;MySQL|Utils&quot;)\n\tstatic FString DeleteByWhereFormatSqlQuery(FString TableName, FString WhereName, FString WhereSymbol, FString WhereValue);\n\n\t&#x2F;*\n\t * ConnectionObject &#x3D;&#x3D; MySQL Object\n\t * @return bool &#x3D;&#x3D; Select Data Is Succeed Or Failed\n\t *&#x2F;\t\n\tUFUNCTION(BlueprintCallable, Category&#x3D;&quot;MySQL|Utils&quot;)\n\tstatic bool SelectOnTableData(UFH_ConnectionObject *ConnectionObject, FString SqlQuery, FQueryResultRows &amp;ResultRows);\n\t\n\t&#x2F;*\n\t * TableName &#x3D; DataBase TableName\n\t * @return FString &#x3D; MySQL Select Query -&gt; Select\n\t *&#x2F;\n\tUFUNCTION(BlueprintPure, Category&#x3D;&quot;MySQL|Utils&quot;)\n\tstatic FString SelectAllFormatSqlQuery(FString TableName);\n\n\t&#x2F;*\n\t * TableName &#x3D; DataBase TableName\n\t * @return FString &#x3D; MySQL Select Query -&gt; Select\n\t *&#x2F;\t\n\tUFUNCTION(BlueprintPure, Category&#x3D;&quot;MySQL|Utils&quot;)\n\tstatic FString SelectByColumnsFormatSqlQuery(FString TableName, FString Columns);\n\n\t&#x2F;*\n\t * TableName &#x3D; DataBase TableName\n\t * @return TArray&lt;FString&gt; &#x3D; Get All Rows -&gt; In All Columns Values\n\t *&#x2F;\t\t\n\tUFUNCTION(BlueprintPure, Category&#x3D;&quot;MySQL|Utils&quot;)\n\tstatic FQueryResultRow GetRowByIndex(const FQueryResultRows &amp;ResultRows, int32 RowIndex);\n&#125;;</code></pre>\n</li>\n<li><p><code>BPFuncLib_FHSQL.cpp</code></p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">#include &quot;BPFuncLib_FHSQL.h&quot;\n#include &quot;mysql.h&quot;\n#include &lt;string&gt;\n\nUFH_ConnectionObject* UBPFuncLib_FHSQL::ConnectToMySQL(FString Host, FString UserName, FString PassWord, FString DBName,\n\tint32 Port, FString &amp;ConnectMessage)\n&#123;\n\tconst std::string m_Host(TCHAR_TO_UTF8(*Host));\n\tconst std::string m_UserName(TCHAR_TO_UTF8(*UserName));\n\tconst std::string m_PassWord(TCHAR_TO_UTF8(*PassWord));\n\tconst std::string m_DBName(TCHAR_TO_UTF8(*DBName));\n\tconst uint32 m_Port &#x3D; Port; \n\n\t&#x2F;&#x2F; Create MySQL Connection Object\n\tUFH_ConnectionObject *ConnectionObject &#x3D; NewObject&lt;UFH_ConnectionObject&gt;();\n\t&#x2F;&#x2F; Init DataBase Connection Object\n\tConnectionObject-&gt;Fh_ConnMysql &#x3D; mysql_init(nullptr);\n\n\t&#x2F;&#x2F; Judge Connection Status And Return ConnectMessage\n\tif (mysql_real_connect(ConnectionObject-&gt;Fh_ConnMysql, m_Host.c_str(), m_UserName.c_str(), m_PassWord.c_str(),\n\t                       m_DBName.c_str(), m_Port, nullptr, 0))\n\t&#123;\n\t\tConnectMessage &#x3D; TEXT(&quot;Connect Succeed&quot;);\n\t&#125;\n\telse\n\t&#123;\n\t\tConnectMessage &#x3D; TEXT(&quot;Connect Failed&quot;);\n\t&#125;\n\n\t&#x2F;&#x2F; Return MySQL Connection Object\n\treturn ConnectionObject;\n&#125;\n\nbool UBPFuncLib_FHSQL::GetConnectionState(UFH_ConnectionObject* ConnectionObject)\n&#123;\n\t&#x2F;&#x2F; Judge Current MySQL Connection State\n\tif (ConnectionObject)\n\t&#123;\n\t\tif (ConnectionObject-&gt;Fh_ConnMysql !&#x3D; nullptr)\n\t\t&#123;\n\t\t\treturn true;\n\t\t&#125;\n\t\treturn false;\n\t&#125;\n\treturn false;\n&#125;\n\nbool UBPFuncLib_FHSQL::CloseConnection(UFH_ConnectionObject* ConnectionObject)\n&#123;\n\t&#x2F;&#x2F; If MySQL Connected -&gt; Close MySQL Connection; Return True\n\t&#x2F;&#x2F; Else -&gt; Return True\n\tif (GetConnectionState(ConnectionObject))\n\t&#123;\n\t\tmysql_close(ConnectionObject-&gt;Fh_ConnMysql);\n\t\tConnectionObject-&gt;Fh_ConnMysql &#x3D; nullptr;\n\t\tConnectionObject &#x3D; nullptr;\n\t\treturn true;\n\t&#125;\n\treturn true;\n&#125;\n\nbool UBPFuncLib_FHSQL::ActionOnTableData(UFH_ConnectionObject* ConnectionObject, FString SqlQuery)\n&#123;\n\tconst std::string m_SqlQuery(TCHAR_TO_UTF8(*SqlQuery));\n\n\t&#x2F;&#x2F; Judge MySQL Is Connected\n\tif (!ConnectionObject)\n\t&#123;\n\t\treturn false;\n\t&#125;\n\t&#x2F;&#x2F; Judge SqlQuery Is Apply Succeed\n\tif (mysql_query(ConnectionObject-&gt;Fh_ConnMysql, m_SqlQuery.c_str()) &#x3D;&#x3D; 0)\n\t&#123;\n\t\treturn true;\n\t&#125;\n\treturn true;\n&#125;\n\nFString UBPFuncLib_FHSQL::InsertFormatSqlQuery(FString TableName, FString InsertValues)\n&#123;\n\t&#x2F;&#x2F; INSERT INTO TableName VALUES(InsertValues);\n\tFString SqlQuery &#x3D; &quot;INSERT INTO &quot; + TableName + &quot; VALUES(&quot; + InsertValues + &quot;);&quot;;\n\treturn SqlQuery;\n&#125;\n\nFString UBPFuncLib_FHSQL::UpdateAllFormatSqlQuery(FString TableName, FString UpdateRowName, FString UpdateValue)\n&#123;\t&#x2F;&#x2F; UPDATE TableName SET RowName&#x3D;UpdateValue;\n\tFString SqlQuery &#x3D; &quot;UPDATE &quot; + TableName + &quot; SET &quot; + UpdateRowName + &quot;&#x3D;&quot; + UpdateValue + &quot;;&quot;;\n\treturn SqlQuery;\n&#125;\n\nFString UBPFuncLib_FHSQL::UpdateByWhereFormatSqlQuery(FString TableName, FString UpdateRowName, FString WhereName, FString WhereSymbol, FString WhereValue, FString UpdateValue)\n&#123;\n\t&#x2F;&#x2F; UPDATE TableName SET UpdateRowName&#x3D;UpdateValue WHERE WhereName&#x3D;WhereValue;\n\tFString SqlQuery &#x3D; &quot;UPDATE &quot; + TableName + &quot; SET &quot; + UpdateRowName + &quot;&#x3D;&quot; + UpdateValue + &quot; WHERE &quot; + WhereName + WhereSymbol + WhereValue + &quot;;&quot;;\n\treturn SqlQuery;\n&#125;\n\nFString UBPFuncLib_FHSQL::DeleteAllFormatSqlQuery(FString TableName)\n&#123;\n\t&#x2F;&#x2F; DELETE FROM TableName;\n\tFString SqlQuery &#x3D; &quot;DELETE FROM &quot; + TableName + &quot;;&quot;;\n\treturn SqlQuery;\n&#125;\n\nFString UBPFuncLib_FHSQL::DeleteByWhereFormatSqlQuery(FString TableName, FString WhereName, FString WhereSymbol, FString WhereValue)\n&#123;\n\t&#x2F;&#x2F; DELETE FROM TableName WHERE WhereName&#x3D;‘WhereValue’;\n\tFString SqlQuery &#x3D; &quot;DELETE FROM &quot; + TableName + &quot; WHERE &quot; + WhereName + WhereSymbol + &quot;&#39;&quot; + WhereValue + &quot;&#39;;&quot;;\n\treturn SqlQuery;\n&#125;\n\nbool UBPFuncLib_FHSQL::SelectOnTableData(UFH_ConnectionObject* ConnectionObject, FString SqlQuery, FQueryResultRows &amp;ResultRows)\n&#123;\n\tMYSQL_RES *m_Res &#x3D; nullptr;\n\tMYSQL_ROW m_Column;\n\tTArray&lt;FString&gt; m_ColumnNames;\n\tFQueryResultRows m_Rows;\n\tconst std::string m_SqlQuery(TCHAR_TO_UTF8(*SqlQuery));\n\n\tif (!ConnectionObject)&#123;return false;&#125;\n\tif (!ConnectionObject-&gt;Fh_ConnMysql)&#123;return false;&#125;\n\n\tif (!mysql_query(ConnectionObject-&gt;Fh_ConnMysql, m_SqlQuery.c_str()))\n\t&#123;\n\t\tResultRows &#x3D; &#123;&#125;;\n\t\tm_Res &#x3D; mysql_store_result(ConnectionObject-&gt;Fh_ConnMysql);\n\t\tconst int m_Columns &#x3D; mysql_num_fields(m_Res);\n\n\t\twhile ((m_Column &#x3D; mysql_fetch_row(m_Res)) !&#x3D; nullptr)\n\t\t&#123;\n\t\t\tFQueryResultRow m_Row;\n\t\t\tfor (int i &#x3D; 0; i &lt; m_Columns; ++i)\n\t\t\t&#123;\n\t\t\t\tm_Row.RowValue.Add(UTF8_TO_TCHAR(m_Column[i]));\n\t\t\t&#125;\n\t\t\tResultRows.RowsValue.Add(m_Row);\n\t\t&#125;\n\t&#125;\n\t\n\tmysql_free_result(m_Res);\n\treturn true;\n&#125;\n\nFString UBPFuncLib_FHSQL::SelectAllFormatSqlQuery(FString TableName)\n&#123;\n\t&#x2F;&#x2F; SELECT * FROM TableName;\n\tFString SqlQuery &#x3D; &quot;SELECT * FROM &quot; + TableName + &quot;;&quot;;\n\treturn SqlQuery;\n&#125;\n\nFString UBPFuncLib_FHSQL::SelectByColumnsFormatSqlQuery(FString TableName, FString Columns)\n&#123;\n\t&#x2F;&#x2F; SELECT CustomerName, City, Country FROM Customers;\n\tFString SqlQuery &#x3D; &quot;SELECT &quot; + Columns + &quot; FROM &quot; + TableName + &quot;;&quot;;\n\treturn SqlQuery;\n&#125;\n\nFQueryResultRow UBPFuncLib_FHSQL::GetRowByIndex(const FQueryResultRows &amp;ResultRows, int32 RowIndex)\n&#123;\n\tconst FQueryResultRow m_Row &#x3D; ResultRows.RowsValue[RowIndex];\n\treturn m_Row;\n&#125;</code></pre></li>\n</ul>\n<h3 id=\"7-编译项目\"><a href=\"#7-编译项目\" class=\"headerlink\" title=\"7. 编译项目\"></a>7. 编译项目</h3><ul>\n<li>在<code>Rider</code>内进行项目编译</li>\n<li>编译完成，可以在<code>Rider</code>内直接<code>运行</code>启动<code>UE4项目</code></li>\n</ul>\n<h3 id=\"8-打包插件\"><a href=\"#8-打包插件\" class=\"headerlink\" title=\"8. 打包插件\"></a>8. 打包插件</h3><h4 id=\"8-1-打包前设置编译工具\"><a href=\"#8-1-打包前设置编译工具\" class=\"headerlink\" title=\"8.1 打包前设置编译工具\"></a>8.1 打包前设置编译工具</h4><ul>\n<li><p>前提：如果安装的<code>Visual Studio 2017</code>可能不需要进行这个步骤，直接进入下一步</p>\n</li>\n<li><p>打包出现<code>RunUAT</code>相关错误信息，再进行此步骤</p>\n</li>\n<li><p>如果使用的是<code>Visual Studio 2019</code>或<code>Visual Studio 2022</code>或其他版本</p>\n</li>\n<li><p>找到<code>RunUAT.bat</code>文件，用<code>记事本</code>打开或编辑</p>\n</li>\n<li><p>文件位置<code>UE4引擎的安装目录\\UE_4.27\\Engine\\Build\\BatchFiles</code></p>\n</li>\n<li><p><code>编辑 -&gt; 查找</code>，<code>%UATExecutable%</code></p>\n</li>\n<li><p><code>%UATExecutable% %* %UATCompileArg%</code>修改为<code>%UATExecutable% %* -VS2019=true %UATCompileArg%</code></p>\n</li>\n<li><p><code>我用的是 VS2022，修改成2022好像不行</code>，但修改成<code>2019</code>就可以正常打包了</p>\n</li>\n</ul>\n<h4 id=\"8-2-打包MySQL插件\"><a href=\"#8-2-打包MySQL插件\" class=\"headerlink\" title=\"8.2 打包MySQL插件\"></a>8.2 打包MySQL插件</h4><ol>\n<li>找到<code>Edit</code>或<code>Settings</code></li>\n<li>选择<code>plugins</code>进入插件界面</li>\n<li>找到插件<code>FH_MySQL</code></li>\n<li>可选步骤<code>Edit</code>，进行插件的相关信息的编辑，包括插件的图标</li>\n<li>点击<code>Package(打包)</code>，选择打包目录<code>自定义</code></li>\n<li>等待打包完成即可</li>\n<li>我自己的电脑上的环境打包，完全没有任何<code>Warning</code>和<code>Error</code>，所以理论上打包不存在问题（写这个插件的时候遇到了很多问题，但用我提供的环境库文件和配置步骤，问题都一个个解决了）</li>\n</ol>\n","text":"UE4 MySQL插件开发1. 项目简介 个人UrealEngine MySQL Plugin开发流程 方便UnrealEngine项目链接和操作MySQL数据库 2. 项目环境IDE -&gt; JetBrains Rider 2022.1 EAP7 内部版本号 221.490...","link":"","photos":[],"count_time":{"symbolsCount":"15k","symbolsTime":"13 mins."},"categories":[{"name":"UnrealEngine","slug":"UnrealEngine","count":9,"path":"api/categories/UnrealEngine.json"}],"tags":[{"name":"UnrealEngine","slug":"UnrealEngine","count":9,"path":"api/tags/UnrealEngine.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#UE4-MySQL%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91\"><span class=\"toc-text\">UE4 MySQL插件开发</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E9%A1%B9%E7%9B%AE%E7%AE%80%E4%BB%8B\"><span class=\"toc-text\">1. 项目简介</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E9%A1%B9%E7%9B%AE%E7%8E%AF%E5%A2%83\"><span class=\"toc-text\">2. 项目环境</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E9%A1%B9%E7%9B%AE%E8%B5%84%E6%BA%90\"><span class=\"toc-text\">3. 项目资源</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-1-%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84\"><span class=\"toc-text\">3.1 资源文件结构</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-%E8%B5%84%E6%BA%90%E9%93%BE%E6%8E%A5\"><span class=\"toc-text\">3.2 资源链接</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4-%E9%A1%B9%E7%9B%AE%E5%88%9B%E5%BB%BA\"><span class=\"toc-text\">4. 项目创建</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-1-%E5%88%9B%E5%BB%BAUE4%E9%A1%B9%E7%9B%AE\"><span class=\"toc-text\">4.1 创建UE4项目</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-2-%E5%88%9B%E5%BB%BA%E6%96%B0%E6%8F%92%E4%BB%B6\"><span class=\"toc-text\">4.2 创建新插件</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-3-%E5%88%9B%E5%BB%BAMySQL-C-%E7%B1%BB\"><span class=\"toc-text\">4.3 创建MySQL C++类</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-3-1-FH-ConnectionObject\"><span class=\"toc-text\">4.3.1 FH_ConnectionObject</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-3-2-BPFuncLib-FHSQL\"><span class=\"toc-text\">4.3.2 BPFuncLib_FHSQL</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#5-%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">5. 项目配置</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#5-1-%E5%BC%95%E5%85%A5MySQL%E7%8E%AF%E5%A2%83%E5%BA%93\"><span class=\"toc-text\">5.1 引入MySQL环境库</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#5-1-1-%E5%AF%BC%E5%85%A5%E7%8E%AF%E5%A2%83%E5%BA%93\"><span class=\"toc-text\">5.1.1 导入环境库</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#5-1-2-%E9%85%8D%E7%BD%AE%E9%A1%B9%E7%9B%AE%E5%B1%9E%E6%80%A7\"><span class=\"toc-text\">5.1.2 配置项目属性</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#5-1-3-%E9%85%8D%E7%BD%AE%E9%A1%B9%E7%9B%AE%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">5.1.3 配置项目文件</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#6-MySQL-C-%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">6. MySQL C++文件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#6-1-MySQL%E8%BF%9E%E6%8E%A5%E5%AF%B9%E8%B1%A1\"><span class=\"toc-text\">6.1 MySQL连接对象</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#6-2-MySQL%E5%87%BD%E6%95%B0%E5%B7%A5%E5%85%B7%E5%BA%93\"><span class=\"toc-text\">6.2 MySQL函数工具库</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#7-%E7%BC%96%E8%AF%91%E9%A1%B9%E7%9B%AE\"><span class=\"toc-text\">7. 编译项目</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#8-%E6%89%93%E5%8C%85%E6%8F%92%E4%BB%B6\"><span class=\"toc-text\">8. 打包插件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#8-1-%E6%89%93%E5%8C%85%E5%89%8D%E8%AE%BE%E7%BD%AE%E7%BC%96%E8%AF%91%E5%B7%A5%E5%85%B7\"><span class=\"toc-text\">8.1 打包前设置编译工具</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#8-2-%E6%89%93%E5%8C%85MySQL%E6%8F%92%E4%BB%B6\"><span class=\"toc-text\">8.2 打包MySQL插件</span></a></li></ol></li></ol></li></ol></li></ol>","author":{"name":"FangH","slug":"blog-author","avatar":"/img/fh.png","link":"/","description":"我曾惊鸿一瞥未来","socials":{"github":"https://github.com/FHangH","twitter":"https://twitter.com/nUCFA2659We0pmu","stackoverflow":"https://stackoverflow.com/users/20173508/user20173508","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/zi-heng-18-99-47","csdn":"https://blog.csdn.net/weixin_44519692?spm=1000.2115.3001.5343","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"UE4 MySQL插件使用","uid":"392fe5e03b8c7afffa5955ae17305c17","slug":"7_MySQL插件使用_03","date":"2022-10-06T07:28:25.950Z","updated":"2022-05-19T04:29:51.469Z","comments":true,"path":"api/articles/7_MySQL插件使用_03.json","keywords":null,"cover":"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN/Post_Img_mini/postImg_25.jpg","text":"UE4 MySQL插件使用1. 插件获取MySQL Plugin 提取码:17um 2. 插件安装 新建UE4项目，类型随意 在项目根目录中新建文件夹Plugins 将FH_MySQL复制到Plugins中 重新打开UE4项目 3. 插件API3.1 连接数据库 返回一个MySQ...","link":"","photos":[],"count_time":{"symbolsCount":"5.3k","symbolsTime":"5 mins."},"categories":[{"name":"UnrealEngine","slug":"UnrealEngine","count":9,"path":"api/categories/UnrealEngine.json"}],"tags":[{"name":"UnrealEngine","slug":"UnrealEngine","count":9,"path":"api/tags/UnrealEngine.json"}],"author":{"name":"FangH","slug":"blog-author","avatar":"/img/fh.png","link":"/","description":"我曾惊鸿一瞥未来","socials":{"github":"https://github.com/FHangH","twitter":"https://twitter.com/nUCFA2659We0pmu","stackoverflow":"https://stackoverflow.com/users/20173508/user20173508","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/zi-heng-18-99-47","csdn":"https://blog.csdn.net/weixin_44519692?spm=1000.2115.3001.5343","juejin":"","customs":{}}}},"next_post":{"title":"Git个人使用","uid":"9bb1210f38db3e1f819e50bcd1059252","slug":"6.Git个人使用","date":"2022-10-06T07:28:25.946Z","updated":"2021-04-21T08:57:08.723Z","comments":true,"path":"api/articles/6.Git个人使用.json","keywords":null,"cover":"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN/Post_Img_mini/postImg_12.jpg","text":"Git个人使用&#x2F;&#x2F; 2021-02-19：苦于还是不记得git bash的使用，每次使用都要到网上找一会，太麻烦了，决定写成博客，记录一下个人的使用总结 &#x2F;&#x2F; 开头从最开始的顺序来记录 ---------------------------...","link":"","photos":[],"count_time":{"symbolsCount":"16k","symbolsTime":"14 mins."},"categories":[{"name":"编程","slug":"编程","count":16,"path":"api/categories/编程.json"}],"tags":[{"name":"Git","slug":"Git","count":1,"path":"api/tags/Git.json"}],"author":{"name":"FangH","slug":"blog-author","avatar":"/img/fh.png","link":"/","description":"我曾惊鸿一瞥未来","socials":{"github":"https://github.com/FHangH","twitter":"https://twitter.com/nUCFA2659We0pmu","stackoverflow":"https://stackoverflow.com/users/20173508/user20173508","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/zi-heng-18-99-47","csdn":"https://blog.csdn.net/weixin_44519692?spm=1000.2115.3001.5343","juejin":"","customs":{}}}}}