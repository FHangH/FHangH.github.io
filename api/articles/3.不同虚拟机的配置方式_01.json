{"title":"不同虚拟机的配置方式","uid":"e341529351da1e239445a65d65dc3c4f","slug":"3.不同虚拟机的配置方式_01","date":"2022-10-06T07:28:25.941Z","updated":"2021-03-14T05:50:06.299Z","comments":true,"path":"api/articles/3.不同虚拟机的配置方式_01.json","keywords":null,"cover":"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN/Post_Img_mini/postImg_06.jpg","content":"<h1 id=\"不同虚拟机的配置方式\"><a href=\"#不同虚拟机的配置方式\" class=\"headerlink\" title=\"不同虚拟机的配置方式\"></a>不同虚拟机的配置方式</h1><p>虚拟机软件的选择：VirtualBox6.0及以上；VmwareWorkstation</p>\n<h4 id=\"VirtualBox的配置方法：\"><a href=\"#VirtualBox的配置方法：\" class=\"headerlink\" title=\"VirtualBox的配置方法：\"></a>VirtualBox的配置方法：</h4><h5 id=\"1-controller的安装过程：\"><a href=\"#1-controller的安装过程：\" class=\"headerlink\" title=\"1. controller的安装过程：\"></a>1. controller的安装过程：</h5><p>1.我们准备好centos7和iaas2.2的iso文件 </p>\n<p>2.在一个磁盘空间充足的磁盘下新建两个文件夹VT-controller; VT-compute, 之后的两个节点分别安装在这两个文件夹下 </p>\n<p>3.打开VirtualBox–新建–名称：Controller</p>\n<p>文件夹：选择之前新建的VT-controller文件夹所在地址</p>\n<p>类型：Linux</p>\n<p>版本：Other Linux（64bit）</p>\n<p>内存：4096MB</p>\n<p>虚拟硬盘：现在创建虚拟硬盘</p>\n<p>4.文件位置：默认</p>\n<p>5.文件大小：40GB</p>\n<p>6.虚拟硬盘类型：VDI</p>\n<p>7.存储在物理硬盘上：动态分配</p>\n<p>此时controller的模板创建好了</p>\n<p>1.管理–主机网络管理器–创建（创建两个虚拟网卡）</p>\n<p>第一块网卡（手动配置）– IPV4：192.168.100.1（内网）</p>\n<p> 子网掩码：255.255.255.0</p>\n<p>DHCP服务器关了</p>\n<p>第二块网卡（手动配置）– IPV4：192.168.200.1（外网）</p>\n<p>  子网掩码：255.255.255.0</p>\n<p>同样关掉DHCP服务</p>\n<p>2.主页面中–设置–系统（主板）–启动顺序：勾上网络，选中光驱，点边上的”向上“箭头移动到最上方</p>\n<p>（处理器）–处理器数量：4</p>\n<p>网络（网卡1）–启用网络连接–界面名称：第一网卡</p>\n<p>  方式：仅主机–高级–混杂：全部允许</p>\n<p> （网卡2）–界面名称为第二款网卡，其它配置同网卡1相同–OK</p>\n<p>3.在主页面中，存储–第二IDE控制器主通道（点击选择centos7.ios）</p>\n<p>4.启动（controller节点已经配置好了）</p>\n<h5 id=\"2-controller节点的安装过程\"><a href=\"#2-controller节点的安装过程\" class=\"headerlink\" title=\"2. controller节点的安装过程\"></a>2. controller节点的安装过程</h5><p>在centos安装之前，可以在安装界面按“Tab”键</p>\n<img src=\"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN/1.%E4%B8%8D%E5%90%8C%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F/1.png\"/>\n\n \n\n<p>在原有的内容后面–空格–输入：net.ifnames&#x3D;0 biosdevname&#x3D;0</p>\n<p>可以禁用网卡命名规则，是的两块网卡（内网和外网）分别为eth0和eth1，方便后面使用，不过后面的内容里，要自觉将ifcfg-enp0s3和ifcfg-enp0s8换成ifcfg-eth0和ifcfg-eth1，即可</p>\n<p>1.Install Centos7</p>\n<p>2.Continue（默认英文，千万别选中文，搭建过程中会乱码和报错，之后也不会安装图形化界面，因为没必要）–SYSTEM选项中的（installtion  destination）–other storage options选项中：选中I will configure partioning</p>\n<p>3.Done–Click here to create them automatically（若有&#x2F;home目录，选中点击下面的‘—’号，可以删除，因为不需要）</p>\n<p>4.Done–Accept Changes</p>\n<p>5.Begin Installation</p>\n<p>6.此时在安装过程中可以设置Root用户的密码，密码：000000，因为方便；其它的不管</p>\n<p>7.reboot完成controller的安装</p>\n<h5 id=\"3-compute的安装过程：\"><a href=\"#3-compute的安装过程：\" class=\"headerlink\" title=\"3. compute的安装过程：\"></a>3. compute的安装过程：</h5><p>1.新建–名称：Compute</p>\n<p>文件夹：选择之前新建的VT-controller文件夹所在地址</p>\n<p>类型：Linux</p>\n<p>版本：Other Linux（64bit）</p>\n<p>内存：2048MB</p>\n<p>虚拟硬盘：现在创建虚拟硬盘</p>\n<p>4.文件位置：默认</p>\n<p>5.文件大小：40GB</p>\n<p>6.虚拟硬盘类型：VDI</p>\n<p>7.存储在物理硬盘上：动态分配</p>\n<p>此时compute的模板创建好了</p>\n<p>1.主页面中–设置–系统（主板）–启动顺序：勾上网络，选中光驱，点边上的”向上“箭头移动到最上方</p>\n<p>（处理器）–处理器数量：2</p>\n<p>网络（网卡1）–启用网络连接–界面名称：第一网卡</p>\n<p>  方式：仅主机–高级–混杂：全部允许</p>\n<p> （网卡2）–界面名称为第二款网卡，其它配置同网卡1相同–OK</p>\n<p>2.在主页面中，存储–第二IDE控制器主通道（点击选择centos7.ios）</p>\n<p>3.启动（compute节点已经配置好了）</p>\n<h5 id=\"4-controller节点的安装过程\"><a href=\"#4-controller节点的安装过程\" class=\"headerlink\" title=\"4. controller节点的安装过程\"></a>4. controller节点的安装过程</h5><p>就照着上面controller节点的安装过程一样的步骤来</p>\n<p>至此两个节点都安装完毕！！！</p>\n<p>接着要对compute节点再照护一下，先将compute节点关机再操作</p>\n<p>compute节点的磁盘分区（parted和fdisk两种方法，推荐用parted）</p>\n<p>1.在主页面中–（选中）compute节点–设置–存储–（存储介质：控制器IDE）最右边有个鼠标移上去会显示“添加虚拟硬盘”并点击–创建新的虚拟盘–文件大小：20GB–虚拟硬盘文件类型VDI–创建–OK</p>\n<p>2.开启compute节点（要对新添加的虚拟硬盘进行配置）</p>\n<h5 id=\"5-在compute中：（parted）\"><a href=\"#5-在compute中：（parted）\" class=\"headerlink\" title=\"5. 在compute中：（parted）\"></a>5. 在compute中：（parted）</h5><pre class=\"line-numbers language-none\"><code class=\"language-none\">\\# fdisk -l\n\n可以看到Disk &#x2F;dev&#x2F;sdb\n\n\\# parted &#x2F;dev&#x2F;sdb \n\n\\#p\n\n\\#h</code></pre>\n\n<p>4.可以看到如图的内容： </p>\n<img src=\"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN/1.%E4%B8%8D%E5%90%8C%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F/2.png\"/>\n\n\n\n<h5 id=\"6-我们需要分别进行mklabel和mkpart\"><a href=\"#6-我们需要分别进行mklabel和mkpart\" class=\"headerlink\" title=\"6. 我们需要分别进行mklabel和mkpart\"></a>6. 我们需要分别进行mklabel和mkpart</h5><pre class=\"line-numbers language-none\"><code class=\"language-none\">\\#mklable gpt\n\n\\#mkpart cinder\n\n\\#xfs\n\n\\#0\n\n\\#8G\n\n\\#I\n\n\\#p</code></pre>\n\n<p>6.此时可以看到已经分好了一个8G的分区cinder</p>\n<img src=\"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN/1.%E4%B8%8D%E5%90%8C%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F/3.png\"/> \n\n<p>7.同理</p>\n<img src=\"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN/1.%E4%B8%8D%E5%90%8C%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F/4.png\"/>\n\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">\\#q（退出）</code></pre>\n\n<p>此时swift的盘也分好了</p>\n<p>cinder和swift的盘分别对应这sdb1和sdb2，后面的IaaS搭建里的openrc配置里会用上</p>\n<h5 id=\"7-fdisk的分区方法：\"><a href=\"#7-fdisk的分区方法：\" class=\"headerlink\" title=\"7. fdisk的分区方法：\"></a>7. fdisk的分区方法：</h5><p>sdb1的创建方式：  </p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">\\#fdisk &#x2F;dev&#x2F;sdb \n\n\\#m</code></pre>\n\n\n\n<p>可以看到帮助文档</p>\n<img src=\"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN/1.%E4%B8%8D%E5%90%8C%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F/5.png\"/>\n\n<p>其中n为添加一个新的分区，w为分好后保存，退出（如果没有w，直接退出，就等于没分区）</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN/1.%E4%B8%8D%E5%90%8C%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F/6.png\"/>前几个都是默认即可，回车</p>\n<p>一直到 Last sector, +sectors or +size{K,M,G} (2048-41943039, default 41943039): +8G</p>\n<p>+size{K,M,G} 其中，+size是你要划分的大小数值，{K,M,G}里的三个为可选的单位，我们这里仅为演示所以我是+8G</p>\n<p>#w （保存，退出）</p>\n<p>此时一个分区创建好了（sdb1）</p>\n<p>sdb2的创建方式如下：</p>\n<img src=\"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN/1.%E4%B8%8D%E5%90%8C%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F/7.png\"/>\n\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">\\#fdisk -l</code></pre>\n\n<p>可以看到两个都创建好了 </p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN/1.%E4%B8%8D%E5%90%8C%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F/8.png\"/>这里关于compute节点的磁盘分区就到这了！</p>\n<p>接着在compute节点中：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">\\#parted &#x2F;dev&#x2F;sd*\n\n（可以看到其中有sda, sda1, sda2, sdb, sdb1, sdc, sdc1；其中sdb1,sdb2分别为后面要配置的cinder和swift两个云盘）</code></pre>\n\n<p>以上就是VirtualBox的配置方法</p>\n<p>接下来就是VmwareWorkstation的配置方式</p>\n<p>首先在主页面的上菜单栏中–编辑–虚拟网络编辑器–(VmwareWorkstation自己默认有一个VMnet0)–添加网络（添加两个，分别为VM net1，VMnet2）–选中VMnet1–在VMnet信息中选中‘仅主机模式’–选中‘将主机虚拟适配器连接到此网络’，取消使用本地DHCP–子网IP：192.168.100.0–子网掩码：255.255.255.0（内网）</p>\n<p>选中VMnet2–在VMnet信息中选中‘NAT模式’–选中‘将主机虚拟适配器连接到此网络’，取消使用本地DHCP–子网IP：192.168.200.0–子网掩码：255.255.255.0（外网）</p>\n<p>网卡配置好了，接下来是两个控制节点</p>\n<h4 id=\"8-controller的安装过程：\"><a href=\"#8-controller的安装过程：\" class=\"headerlink\" title=\"8. controller的安装过程：\"></a>8. controller的安装过程：</h4><p>1.我们准备好centos7和iaas2.2的iso文件 </p>\n<p>2.在一个磁盘空间充足的磁盘下新建两个文件夹VM-controller; VM-compute, 之后的两个节点分别安装在这两个文件夹下</p>\n<p>3.在主页面中–创建新的虚拟机–典型–下一步–稍后安装操作系统–下一步：客户机操作系统：Linux–下一步</p>\n<p> 版本：centos7 64位</p>\n<p>4.虚拟机名称：Controller</p>\n<p> 位置：你所创建的VM-controller文件夹的地址–下一步</p>\n<p> 最大磁盘大小：40GB</p>\n<p> 选中：将虚拟磁盘拆分成多个文件–下一步–自定义硬件：内存：4GB</p>\n<p>  处理器数量和内核都选：2；虚拟化引擎：选中‘虚拟化 InterVT-x&#x2F;EPT或AMD-V&#x2F;RVI ’</p>\n<p>  选中‘新CD&#x2F;DVD（IDE）’：添加一个新的‘新CD&#x2F;DVD（IDE）’</p>\n<p>  （两个IDE的设备状态选中启动时连接，连接选中使用ISO映像文件）</p>\n<p>  浏览：centos7.iso文件的地址，第二个IDE选中iaas2.2.iso文件地址</p>\n<p>   选中‘网络适配器’：添加一个新的‘网络适配器2’</p>\n<p>（两个网络适配器，第一个：仅主机模式；第二个：默认NAT模式）–关闭–完成</p>\n<p>5.鼠标移到创建好的controller节点上–右击–管理–克隆–下一步–下一步–创建方法：链接克隆–下一步–虚拟机名称：Compute</p>\n<p>位置–浏览：VM-compute文件夹位置</p>\n<p>–完成–关闭</p>\n<p>6.编辑虚拟机–内存：2</p>\n<p>处理器数量和内核都选：1；虚拟化引擎：选中‘虚拟化 InterVT-x&#x2F;EPT或AMD-V&#x2F;RVI ’</p>\n<p>（其它不用动）</p>\n<p>两个节点的配置完成，安装过程和VirtualBox的安装过程一样</p>\n<p>接下来就是VmwareWorkstation中compute节点的添加磁盘了</p>\n<p>选中compute节点–编辑虚拟机设置–硬盘–添加（硬盘，添加两个）–下一步–默认推荐–创建新虚拟硬盘–磁盘大小：20GB–将虚拟硬盘拆分成多个文件–下一步–完成</p>\n<p>（第二块硬盘的文件名不可与第一块硬盘文件名相同，随别改一个）</p>\n<p>现在启动compute节点，接下来的步骤和VirtualBox的磁盘配置方法相同</p>\n<p>至此，两个不同虚拟机软件对两个不同节点的配置和磁盘划分的方法介绍完毕！！！</p>\n<p>请看下一篇secureCRTP连接虚拟机！！！</p>\n","text":"不同虚拟机的配置方式虚拟机软件的选择：VirtualBox6.0及以上；VmwareWorkstation VirtualBox的配置方法：1. controller的安装过程：1.我们准备好centos7和iaas2.2的iso文件 2.在一个磁盘空间充足的磁盘下新建两个文件夹...","link":"","photos":[],"count_time":{"symbolsCount":"4.2k","symbolsTime":"4 mins."},"categories":[{"name":"云计算","slug":"云计算","count":4,"path":"api/categories/云计算.json"}],"tags":[{"name":"IaaS","slug":"IaaS","count":4,"path":"api/tags/IaaS.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%B8%8D%E5%90%8C%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F\"><span class=\"toc-text\">不同虚拟机的配置方式</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#VirtualBox%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95%EF%BC%9A\"><span class=\"toc-text\">VirtualBox的配置方法：</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-controller%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%EF%BC%9A\"><span class=\"toc-text\">1. controller的安装过程：</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#2-controller%E8%8A%82%E7%82%B9%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B\"><span class=\"toc-text\">2. controller节点的安装过程</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-compute%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%EF%BC%9A\"><span class=\"toc-text\">3. compute的安装过程：</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-controller%E8%8A%82%E7%82%B9%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B\"><span class=\"toc-text\">4. controller节点的安装过程</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#5-%E5%9C%A8compute%E4%B8%AD%EF%BC%9A%EF%BC%88parted%EF%BC%89\"><span class=\"toc-text\">5. 在compute中：（parted）</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#6-%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E5%88%86%E5%88%AB%E8%BF%9B%E8%A1%8Cmklabel%E5%92%8Cmkpart\"><span class=\"toc-text\">6. 我们需要分别进行mklabel和mkpart</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#7-fdisk%E7%9A%84%E5%88%86%E5%8C%BA%E6%96%B9%E6%B3%95%EF%BC%9A\"><span class=\"toc-text\">7. fdisk的分区方法：</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#8-controller%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%EF%BC%9A\"><span class=\"toc-text\">8. controller的安装过程：</span></a></li></ol></li></ol></li></ol></li></ol>","author":{"name":"FangH","slug":"blog-author","avatar":"/img/fh.png","link":"/","description":"我曾惊鸿一瞥未来","socials":{"github":"https://github.com/FHangH","twitter":"https://twitter.com/nUCFA2659We0pmu","stackoverflow":"https://stackoverflow.com/users/20173508/user20173508","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/zi-heng-18-99-47","csdn":"https://blog.csdn.net/weixin_44519692?spm=1000.2115.3001.5343","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"C语言基础","uid":"fa71f19cd12c01c160b7bc498a3984ba","slug":"5.C语言基础_01","date":"2022-10-06T07:28:25.944Z","updated":"2021-04-05T07:22:51.252Z","comments":true,"path":"api/articles/5.C语言基础_01.json","keywords":null,"cover":"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN/Post_Img_mini/postImg_11.jpg","text":"C语言基础1. 编译预处理命令三种： 宏定义 文件包含 条件编译 1.1 宏定义宏是根据一系列定义的规则替换一段文本的一种模式 格式：#define 标识符 字符串 标识符：宏名，大写书写（区别与普通变量名） 字符串：宏体，赋值给标识符（编写时，直接写标识符，编译预处理时替换成字...","link":"","photos":[],"count_time":{"symbolsCount":"54k","symbolsTime":"49 mins."},"categories":[{"name":"编程","slug":"编程","count":16,"path":"api/categories/编程.json"}],"tags":[{"name":"C/C++","slug":"C-C","count":10,"path":"api/tags/C-C.json"}],"author":{"name":"FangH","slug":"blog-author","avatar":"/img/fh.png","link":"/","description":"我曾惊鸿一瞥未来","socials":{"github":"https://github.com/FHangH","twitter":"https://twitter.com/nUCFA2659We0pmu","stackoverflow":"https://stackoverflow.com/users/20173508/user20173508","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/zi-heng-18-99-47","csdn":"https://blog.csdn.net/weixin_44519692?spm=1000.2115.3001.5343","juejin":"","customs":{}}}},"next_post":{"title":"secureCRT上传镜像","uid":"60a02aae4ddcc163be15d5053e1b9c2a","slug":"3.secureCRT上传镜像_03","date":"2022-10-06T07:28:25.939Z","updated":"2021-03-14T05:50:01.132Z","comments":true,"path":"api/articles/3.secureCRT上传镜像_03.json","keywords":null,"cover":"https://cdn.jsdelivr.net/gh/FHangH/FHangBlogCDN/Post_Img_mini/postImg_09.jpg","text":"secureCRT上传镜像本文为如何在secureCRT中往虚拟机中上传镜像文件 打开secureCRT后 1. 将鼠标移到192.168.100.10的标签，右击–打开secureFX 2. 选中本地里的XianDian-Iaas-v2.2.iso和CentOS-7-x86_6...","link":"","photos":[],"count_time":{"symbolsCount":415,"symbolsTime":"1 mins."},"categories":[{"name":"云计算","slug":"云计算","count":4,"path":"api/categories/云计算.json"}],"tags":[{"name":"IaaS","slug":"IaaS","count":4,"path":"api/tags/IaaS.json"}],"author":{"name":"FangH","slug":"blog-author","avatar":"/img/fh.png","link":"/","description":"我曾惊鸿一瞥未来","socials":{"github":"https://github.com/FHangH","twitter":"https://twitter.com/nUCFA2659We0pmu","stackoverflow":"https://stackoverflow.com/users/20173508/user20173508","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/zi-heng-18-99-47","csdn":"https://blog.csdn.net/weixin_44519692?spm=1000.2115.3001.5343","juejin":"","customs":{}}}}}